{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Kenvue Data Layer Specifications Home","text":""},{"location":"#overview","title":"Overview","text":"<p>This repository contains the necessary specifications to build an Event Driven Data Layer.</p>"},{"location":"#events","title":"Events","text":"<p>Each file inside the events folder corresponds to a single use case or site event that needs to be implemented.</p> <p>These will be used to share data with Google Tag Manager on desktop and will be sent directly to Google Analytics 4 on mobile.</p>"},{"location":"#conventions","title":"Conventions","text":""},{"location":"#code-samples","title":"Code samples","text":"<p>We defer to stylistic preferences in the target codebase, but here are the JavaScript conventions we use in our code samples:</p> <ul> <li>Double quotes instead of single quotes in object properties</li> <li>No trailing commas</li> <li>Semicolons required</li> </ul>"},{"location":"#questionscomments","title":"Questions/Comments","text":"<p>For any questions or comments, please contact charlie.tysse@searchdiscovery.com.</p>"},{"location":"data-attributes/all_components/","title":"All components","text":"<p>Add the following attributes to the outermost HTML element of every component.</p>"},{"location":"data-attributes/all_components/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;div\ndata-layer-component=\"&lt;component&gt;\"\n&gt;\n</code></pre>"},{"location":"data-attributes/all_components/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of component string required The name of the component Carousel:Wrapper"},{"location":"data-attributes/forms/","title":"Forms","text":"<p>Add the following attributes to every form HTML element.</p>"},{"location":"data-attributes/forms/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;form\ndata-layer-identifier=\"&lt;identifier&gt;\"\ndata-layer-name=\"&lt;name&gt;\"\n&gt;\n</code></pre>"},{"location":"data-attributes/forms/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string recommended The form machine-readable name. This should be a unique value specific to this form, if one exists. If one does not exist, this can also be populated with the same value as the . ecp_locator, free_trial name string required The form human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the form with. It should be lowercase snake_case. ecp_locator, free_trial"},{"location":"data-attributes/layout/","title":"Layout","text":"<p>Add the following attributes to the outermost HTML of each layout region.</p>"},{"location":"data-attributes/layout/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;div\ndata-layer-region=\"&lt;region&gt;\"\n&gt;\n</code></pre>"},{"location":"data-attributes/layout/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of region string required The name of the region represented by the layout item header, body, footer"},{"location":"data-attributes/menus/","title":"Menus","text":"<p>Add the attribute below to each <code>&lt;li&gt;</code> within a menu component block.</p> <p>This attribute will enable the construction of a link heirarchy for menu items.</p>"},{"location":"data-attributes/menus/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;li\ndata-layer-menu_item=\"&lt;menu_item&gt;\"\n&gt;\n</code></pre>"},{"location":"data-attributes/menus/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of menu_item string required The text of the link contained within the <code>&lt;a&gt;</code> tag inside of the <code>&lt;li&gt;</code> Contact Us"},{"location":"events/click/","title":"Click","text":"<p>These events will be automatically detected and fired for any <code>&lt;a&gt;</code> tag clicked by a user. The data attributes and events are primarily here for cases in which a non anchor tag is used as a link. </p> <p>For example, if a <code>&lt;button&gt;</code> tag is used in combination with Javascript to represent a download link, you would need to add these attributes to manually fire the event.</p>"},{"location":"events/click/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;button\ndata-layer-event=\"click\"\ndata-layer-category=\"&lt;category&gt;\"\ndata-layer-category2=\"&lt;category2&gt;\"\ndata-layer-category3=\"&lt;category3&gt;\"\ndata-layer-category4=\"&lt;category4&gt;\"\ndata-layer-category5=\"&lt;category5&gt;\"\ndata-layer-identifier=\"&lt;identifier&gt;\"\ndata-layer-link_text=\"&lt;link_text&gt;\"\ndata-layer-link_url=\"&lt;link_url&gt;\"\ndata-layer-link_hostname=\"&lt;link_hostname&gt;\"      \ndata-layer-outbound=\"&lt;outbound&gt;\"\ndata-layer-protocol=\"&lt;type&gt;\"\n&gt;\n</code></pre>"},{"location":"events/click/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User clicks a non anchor tag used for an action, i.e. &lt;button&gt;\n// Code\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"click\",\nevent_data: {\ncomponent_ancestry: \"&lt;component_ancestry&gt;\", // recommended | string | string - delimeted (~) | ex. hero~product carousel\ncategory: \"&lt;category&gt;\", // optional | string | ex. cta_links, wtb_links\ncategory2: \"&lt;category2&gt;\", // optional | string | ex. cta_links, wtb_links\ncategory3: \"&lt;category3&gt;\", // optional | string | ex. cta_links, wtb_links\ncategory4: \"&lt;category4&gt;\", // optional | string | ex. cta_links, wtb_links\ncategory5: \"&lt;category5&gt;\", // optional | string | ex. cta_links, wtb_links\nidentifier: \"&lt;identifier&gt;\", // optional | string | ex. uniquely_created_id\nlink_classes: \"&lt;link_classes&gt;\", // REQUIRED | string | ex. button-red \nlink_id: \"&lt;link_id&gt;\", // REQUIRED | string | ex. submit-button\nlink_text: \"&lt;link_text&gt;\", // REQUIRED | string | ex. click here\nlink_url: \"&lt;link_url&gt;\", // REQUIRED | string | ex. https://www.example.com/form\nlink_hostname: \"&lt;link_hostname&gt;\", // REQUIRED | string | ex. https://www.example.com\nnavigation_ancestry: \"&lt;navigation_ancestry&gt;\", // recommended | string - delimeted (~) | ex. about~our ceo\noutbound: \"&lt;outbound&gt;\", // optional | boolean | ex. false\nregion_ancestry: \"&lt;region_ancestry&gt;\", // recommended | string - delimeted (~) | ex. header~navigation\nprotocol: \"&lt;type&gt;\", // REQUIRED | string | ex. http, https, mailto, tel\n}\n});\n</code></pre>"},{"location":"events/click/#variable-definitions","title":"Variable Definitions","text":"Field Type Required? Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of component_ancestry string recommended A delimited string showing all components in the ancestry of the link clicked hero~product carousel category string optional Optional field that enables you to assign this link a specific category. Used primarily when you want to analyze the performance of a group of links that aren't connected by component_ancestry, region_ancestry, link_url, or link_text. cta_links, wtb_links category[2-5] string optional Optional fields that enable you to assign this link additional subcategories beyond category. cta_links, wtb_links identifier string optional Optional field that enables you to assign this link a specific ID. Used primarily when you need to identify a link and component_ancestry, region_ancestry, link_classes, link_id, link_text, and link_url are not sufficient to do that. link_classes string required The list of HTML/CSS classes applied to the link. button-red link_id string required The HTML/CSS ID of the link. submit-button link_text string required The full text of the link. click here link_url string required The full URL of the link. https://www.example.com/form link_hostname string required The hostname of the link. https://www.example.com navigation_ancestry string recommended A delimited string showing all navigation items in the ancestry of link clicked in a multi-tiered menu about~our leadership~our CEO outbound boolean conditional Does the link point to a different domain? false region_ancestry string recommended A delimited string showing all regions in the ancestry of the link clicked header~navigation protocol string required Records the type of link that was clicked. The type here refers to what comes before the :// on the link itself. Useful for identifying http links that should be https, as well as reporting on mailto, tel, and other alternate link types http, https, tel, mailto"},{"location":"events/file_download/","title":"File Download","text":"<p>These events will be automatically detected and fired for any link clicked by the user that leads to a file. The data attributes and events are primarily here for cases in which a non anchor tag is used as a link. </p> <p>For example, if a <code>&lt;button&gt;</code> tag is used in combination with Javascript to represent a download link, you would need to add these attributes to manually fire the event.</p>"},{"location":"events/file_download/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;a href=\"&lt;link_url&gt;\"\ndata-layer-event=\"file_download\"\ndata-layer-component_ancestry=\"&lt;component_ancestry&gt;\"\ndata-layer-file_extension=\"&lt;file_extension&gt;\"\ndata-layer-file_name=\"&lt;file_name&gt;\"\ndata-layer-identifier=\"&lt;identifier&gt;\"\ndata-layer-link_url=\"&lt;link_url&gt;\"\ndata-layer-link_id=\"&lt;link_id&gt;\"\ndata-layer-link_classes=\"&lt;link_classes&gt;\"\ndata-layer-link_text=\"&lt;link_text&gt;\"\ndata-layer-navigation_ancestry=\"&lt;navigation_ancestry&gt;\"\ndata-layer-outbound=\"&lt;outbound&gt;\"\ndata-layer-region_ancestry=\"&lt;region_ancestry&gt;\"\ndata-layer-protocol=\"&lt;type&gt;\"\n&gt;\n</code></pre>"},{"location":"events/file_download/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User clicks a non anchor tag used for a file download, i.e. &lt;button&gt;\n// Code\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"file_download\",\nevent_data: {\ncomponent_ancestry: \"&lt;component_ancestry&gt;\", // recommended | string - delimited (~) | ex. hero~product carousel\nfile_extension: \"&lt;file_extension&gt;\", // recommended | string | ex. pdf\nfile_name: \"&lt;file_name&gt;\", // recommended | string | ex. example.pdf\nidentifier: \"&lt;identifier&gt;\", // optional | string | ex. uniquely_created_id\nlink_url: \"&lt;link_url&gt;\", // REQUIRED | string | ex. https://www.example.com/form\nlink_id: \"&lt;link_id&gt;\", // REQUIRED | string | ex. submit-button\nlink_classes: \"&lt;link_classes&gt;\", // REQUIRED | string | ex. button-red\nlink_text: \"&lt;link_text&gt;\", // REQUIRED | string | ex. download pdf\nnavigation_ancestry: \"&lt;navigation_ancestry&gt;\", // recommended | string - delimited (~) | ex. about~our ceo\noutbound: \"&lt;outbound&gt;\", // optional | boolean | ex. false\nregion_ancestry: \"&lt;region_ancestry&gt;\", // recommended | string - delimited (~) | ex. header~navigation\nprotocol: \"&lt;type&gt;\" // recommended | string | ex. http, https, mailto, tel\n}\n});\n</code></pre>"},{"location":"events/file_download/#variable-definitions","title":"Variable Definitions","text":"Field Type Required? Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of component_ancestry string recommended A delimited string showing all components in the ancestry of the link clicked hero~product carousel file_extension string recommended The file extension of the file being downloaded. pdf file_name string recommended The filename of the file being downloaded. drug_facts.pdf identifier string optional Optional field that enables you to assign this link a specific ID. Used primarily when you need to identify a link and component_ancestry, region_ancestry, link_classes, link_id, link_text, and link_url are not sufficient to do that. link_classes string required The list of HTML/CSS classes applied to the link. button-red link_text string required The full text of the link. click here link_domain string required The domain of the link. example.com link_id string required The HTML/CSS ID of the link. submit-button link_url string required The full URL of the link. https://www.example.com/form navigation_ancestry string recommended A delimited string showing all navigation items in the ancestry of link clicked in a multi-tiered menu about~our leadership~our CEO outbound boolean conditional Does the link point to a different domain? false region_ancestry string recommended A delimited string showing all regions in the ancestry of the link clicked header~navigation protocol string recommended The link protocol. http, https, mailto, tel"},{"location":"events/iframe_message/","title":"iFrame message","text":"<p>Fire whenever an iframe emits a message using the <code>window.postMessage</code> method. </p> <p>This will be automatically collected and fired through GTM for now, but the HTML data attributes should still be added if possible to help with identification.</p>"},{"location":"events/iframe_message/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;iframe src=\"&lt;page_location&gt;\"\ndata-layer-category=\"&lt;category&gt;\"\ndata-layer-category2=\"&lt;category2&gt;\"\ndata-layer-identifier=\"&lt;identifier&gt;\"\ndata-layer-name=\"&lt;name&gt;\"\n&gt;\n</code></pre>"},{"location":"events/iframe_message/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// Iframe emits a message using window.postMessage method\n// Code\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'iframe_post_message',\nevent_data: {\ncategory: \"&lt;category&gt;\", // recommended | string | ex. audio, where to buy, video\ncategory2: \"&lt;category2&gt;\", // optional | string | ex. audio, where to buy, video\ndata: \"&lt;data&gt;\", // REQUIRED | variable | ex. {event: 'play', videoName: 'my video', videoProvider: 'vimeo'}\nhtml_classes: \"&lt;classes&gt;\", // optional | string | ex. audio-embed\nhtml_element: \"&lt;element&gt;\", // REQUIRED | HTMLIFrameElement | ex. &lt;iframe src=\"sample.com/iframe\" ...&gt;\nhtml_id: \"&lt;id&gt;\", // optional | string | ex. hero-video\nidentifier: \"&lt;identifier&gt;\", // optional | string | ex. vidyard-video-embed\nname: \"&lt;name&gt;\", // optional | string | ex. vidyard video embed\npage_hostname: \"&lt;page_hostname&gt;\", // REQUIRED | string | ex. vimeo.com\npage_location: \"&lt;page_location&gt;\", // REQUIRED | string | ex. https://www.example.com\n}\n});\n</code></pre>"},{"location":"events/iframe_message/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of category string recommended A category added to the iframe via data attributes that can be used to represent what type of component/tool/widget is embedded via the iframe audio, where to buy, video category2 string contextual Categories 2 - 5 can be used to further categorize the iframe audio, where to buy, video data variable required The data payload sent from the iframe <code>{event: 'play', videoName: 'this is a video', videoProvider: 'vimeo'}</code> html_classes string contextual The iFrame CSS classes. <code>audio-embed</code> html_element HTMLIFrameElement required The iFrame HTML element. <code>&lt;iframe src=\"neutrogena.com/iframe\" ...&gt;</code> html_id string contextual The iFrame HTML ID attribute. <code>hero-video</code> identifier string contextual An ID added to the iframe via data attributes that can be used to identify which iframe sent the message <code>vidyard-video-embed</code> name string contextual A name added to the iframe via data attributes that can be used to identify which iframe sent the message <code>vidyard video embed</code> page_hostname string required The hostname of the iFrame source. <code>vimeo.com</code> page_location string required The full URL of the iFrame source. <code>where-to-buy.co/example</code>"},{"location":"events/page_view/","title":"Page View","text":"<p>Fire whenever a user loads in a new page, whether that is done synchronously or asynchronously.</p> <p>This event should be the first pushed into the data layer on each page. Given many 3rd party scripts push events to the data layer, this event push should be placed in the page <code>&lt;head&gt;</code> and should be the first <code>&lt;script&gt;</code> tag on the page to ensure it is the first event.</p> <p>There is no longer a concept of virtual page view, so this event should be fired whenever a virtual page view would have been fired in the past, such as when a new screen is loaded asyncronously within an angular, react, or vue app/embed.</p>"},{"location":"events/page_view/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User loads a new page (synchronously or asynchronously)\n// Should be the first push into dataLayer, placed in the &lt;head&gt; and ideally first &lt;script&gt; on page.\n// Code\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ page_data: null, user_data: null });  // Clear the previous attributes.\ndataLayer.push({\nevent: 'page_view',\npage_data: {\npage_category: '&lt;category&gt;', // REQUIRED | string | ex. sun protection\npage_subcategory: '&lt;page_subcategory&gt;', // recommended | string | ex. waterproof\npage_id: '&lt;page_id&gt;', // REQUIRED | string | ex. 12345\npage_name: '&lt;page_name&gt;', // REQUIRED | string | ex. homepage, search results, product:sample\npage_type: '&lt;page_type&gt;', // REQUIRED | string | ex. article, blog, homepage, product\nsite_brand: '&lt;site_brand&gt;', // REQUIRED | string | ex. neutrogena\nsite_country: '&lt;site_country&gt;', // REQUIRED | string | ex us, au, is, jp\nsite_franchise: '&lt;site_franchise&gt;', // REQUIRED | string | ex essential health, skin care &amp; self care\nsite_region: '&lt;site_region&gt;', // REQUIRED | string | ex. EMEA\nsite_section: '&lt;site_section&gt;', // REQUIRED | string | ex. products\nuser_login_state: '&lt;user_login_state&gt;' // REQUIRED | string | ex. authenticated, anonymous \n},\nuser_data: {\nuser_id: '&lt;user_id&gt;' // REQUIRED, if user is logged in | string | ex. 12345\n}\n});\n</code></pre>"},{"location":"events/page_view/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Max Length page_category string required Used for grouping pages (or screens) into categories based on their content. Most often aligns with page tags/taxonomy terms or breadcrumbs. <code>sun protection</code> <code>100</code> page_subcategory string recommended Used for grouping pages (or screens) into subcategories based on their content. Most often aligns with page tags/taxonomy terms or breadcrumbs. <code>waterproof</code> <code>100</code> page_id string required A durable identifier for a page that will enable measurement over time despite the page URL, title, etc changing. Generally sourced from the site content management system. <code>12345</code> <code>100</code> page_name string required A unique name for this page independent of page title. Google does not tend to use custom page names, but it's a mainstay in Adobe and therefore is included here for compatibility as well as for its usefulness generally. <code>homepage,search results,product:neutrogena hydro boost ge</code>l <code>100</code> page_type string required Used for grouping pages (or screens) into high level types. <code>article,blog,homepage,product</code> <code>100</code> site_brand string required The brand the site is associated with.  Please view the Kenvue Internal Documentation -  Product Hierarchy Mapping for additional definitions. <code>neutrogena</code> <code>100</code> site_country string required The country the site is associated with. You must use the ISO Standard ==&gt; Alpha-2-Codes. <code>us</code> <code>100</code> site_franchise string required The franchise the site is associated with.  Please view the Kenvue Internal Documentation -  Product Hierarchy Mapping for additional definitions. <code>essential health, skin care &amp; self care</code> <code>100</code> site_region string required The region the site is associated with.  Please view the Kenvue Internal Documentation - Customer Mapping for additional definitions. <code>EMEA</code> <code>100</code> site_section string required The section of the site that the current page resides in. products 100 user_login_state string required Set on all events with the authentication status of the visitor. <code>authenticated, anonymous</code> <code>100</code> user_id string contextual The id of the user currently logged in to the site, if the site offers authentication and the user is authenticated. <code>123456</code> <code>100</code>"},{"location":"events/scroll_milestone/","title":"Scroll Milestone","text":"<p>Fire when a user scrolls past a certain scroll depth. The built-in <code>scroll</code> event can be set up to automatically on 90% scroll depth, but this event will allow for more milestones to be recorded.</p>"},{"location":"events/scroll_milestone/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User scrolls past a certain scroll depth\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'scroll_milestone',\nevent_data: {\nmilestone: '&lt;milestone&gt;' // REQUIRED | string | ex. 25, 50, 75\n}\n});\n</code></pre>"},{"location":"events/scroll_milestone/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of milestone string required The depth to which user scrolled on the page. 25,50,75"},{"location":"events/share/","title":"Share","text":"<p>Fire whenever a user shares content via email or social. </p> <p>The parameters page_title and page_location are automatically sent along on each page view and should be able to contextualize this event without any additional information being needed.</p>"},{"location":"events/share/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;a href=\"&lt;link_url&gt;\"\ndata-layer-event=\"share\"\ndata-layer-content_type=\"&lt;content_type&gt;\"\ndata-layer-item_id=\"&lt;item_id&gt;\"\ndata-layer-method=\"&lt;method&gt;\"\n&gt;\n</code></pre>"},{"location":"events/share/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User shares to social media.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'share',\nevent_data: {\ncontent_type: '&lt;content_type&gt;', // REQUIRED | string | type of content | ex. blog, landing, content, product, video, livestream event\nitem_id: '&lt;item_id&gt;', // recommended | string | product primary ID | ex. SKU CW21001 or UPC 012345678905 (12 digits)\nmethod: '&lt;method&gt;' // REQUIRED | string | social platform | ex. email, facebook, twitter\n}\n});\n</code></pre>"},{"location":"events/share/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of content_type string required The type of content shared blog, content, home, landing, product, video, livestream event item_id string recommended The product primary ID (SKU or UPC) if it is a product being shared 123456 method string required The platform used to share content email, facebook, twitter"},{"location":"events/accordion/collapse-accordion/","title":"Collapse Accordion","text":"<p>Fire whenever a user collapses an accordion item.</p> <p>If using data attributes, the <code>data-layer-event</code> attribute should be dynamically updated from <code>expand_accordion</code> to <code>collapse_accordion</code> whenever the accordion is expanded so this event will fire.</p>"},{"location":"events/accordion/collapse-accordion/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;a href=\"&lt;link_url&gt;\"\ndata-layer-event=\"collapse_accordion\",\ndata-layer-identifier=\"&lt;identifier&gt;\"\ndata-layer-name=\"&lt;name&gt;\"\ndata-layer-heading=\"&lt;heading&gt;\"\ndata-layer-index=\"&lt;index&gt;\"\ndata-layer-type=\"&lt;type&gt;\"\n&gt;\n</code></pre>"},{"location":"events/accordion/collapse-accordion/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User collapses accordion item.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"collapse_accordion\",\nevent_data: {\nidentifier: \"&lt;identifier&gt;\", // REQUIRED | string | ex. 12345abcde12345\nname: \"&lt;name&gt;\", // optional | string | ex. FAQs, 2\nheading: \"&lt;heading&gt;\", // REQUIRED | string | ex. \"Are our products safe?\"   \nindex: \"&lt;index&gt;\", // optional | integer | ex. 1 | min. lgth. 1 | min. 1\ntype: \"&lt;type&gt;\" // recommended | integer | ex. FAQ, product\n}\n});\n</code></pre>"},{"location":"events/accordion/collapse-accordion/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string required The computer-readable machine name of the accordion. Use UUID provided by the component. 12345abcde12345 name string recommended The human-readable name of the accordion. If user does not input one, populate with numerical index of which accordion this is on the page (1-indexed). FAQs are the big one that currently need to be broken out in reporting, so getting a name for those should be the priority. FAQs, 2 heading string required The text heading of the accordion item that was opened/closed \"Are our products safe?\" index integer recommended The ordinal slot number of the accordion item. E.g. - the top item in the accordion will be slot 1. (1-indexed) 1 1 1 type integer recommended The type of accordion. FAQ, product"},{"location":"events/accordion/expand-accordion/","title":"Expand Accordion","text":"<p>Fire whenever a user expands an accordion item.</p> <p>If using data attributes, the <code>data-layer-event</code> attribute should be dynamically updated from <code>collapse_accordion</code> to <code>expand_accordion</code> whenever the accordion is expanded so this event will fire.</p>"},{"location":"events/accordion/expand-accordion/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;a href=\"&lt;link_url&gt;\"\ndata-layer-event=\"expand_accordion\",\ndata-layer-identifier=\"&lt;identifier&gt;\"\ndata-layer-name=\"&lt;name&gt;\"\ndata-layer-heading=\"&lt;heading&gt;\"\ndata-layer-index=\"&lt;index&gt;\"\ndata-layer-type=\"&lt;type&gt;\"\n&gt;\n</code></pre>"},{"location":"events/accordion/expand-accordion/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User expands accordion item.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"expand_accordion\",\nevent_data: {\nidentifier: \"&lt;identifier&gt;\", // REQUIRED | string | ex. 12345abcde12345\nname: \"&lt;name&gt;\", // optional | string | ex. FAQs, 2\nheading: \"&lt;heading&gt;\", // REQUIRED | string | ex. \"Are our products safe?\"   \nindex: \"&lt;index&gt;\", // optional | integer | ex. 1 | min. lgth. 1 | min. 1\ntype: \"&lt;type&gt;\" // recommended | integer | ex. FAQ, product\n}\n});\n</code></pre>"},{"location":"events/accordion/expand-accordion/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string required The computer-readable machine name of the accordion. Use UUID provided by the component. 12345abcde12345 name string recommended The human-readable name of the accordion. If user does not input one, populate with numerical index of which accordion this is on the page (1-indexed). FAQs are the big one that currently need to be broken out in reporting, so getting a name for those should be the priority. FAQs, 2 heading string required The text heading of the accordion item that was opened/closed \"Are our products safe?\" index integer recommended The ordinal slot number of the accordion item. E.g. - the top item in the accordion will be slot 1. (1-indexed) 1 1 1 type integer recommended The type of accordion. FAQ, product"},{"location":"events/authentication/detect_user/","title":"Detect User","text":"<p>This is a conditional event that should only be fired in very specific cases. It is intended to cover cases where a user authentication system exists on the site but the user authentication state may not be known by the time the page_view event is sent. In that case, send this event as soon as the user authentication state is known.</p> <p>Do not clear the page_data variable before setting user_login_state here as this is not a page view.</p>"},{"location":"events/authentication/detect_user/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User authentication exists, but the 'authentication state' may not be known by the time the page_view event is fired.\n// NOTE: Do not clear the page_data variable before setting user_login_state here. This is not a page view.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null, user_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"detect_user\",\npage_data: {\nuser_login_state: '&lt;user_login_state&gt;', // recommended | string | ex. 1234567890    \n},\nuser_data: {\nuser_id: \"&lt;user_id&gt;\", // optional | string | ex. authenticated, anonymous\nuser_type: '&lt;user_type&gt;' // optional | string | ex. new, returning\n}\n});\n</code></pre>"},{"location":"events/authentication/detect_user/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of user_id string recommended The user identifier 1234567890 user_login_state string contextual Set on all events with the authentication status of the visitor. authenticated, anonymous user_type string contextual Set on all events with the authentication type of the visitor are they new or returning new, returning"},{"location":"events/authentication/login/","title":"Login","text":"<p>Fire whenever a user logs in to an account.</p>"},{"location":"events/authentication/login/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User logs into an account\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null, user_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"login\",\nevent_data: {\nmethod: \"&lt;method&gt;\", // recommended | string | ex. google, linkedin, email and password\n},\npage_data: {\nuser_login_state: '&lt;user_login_state&gt;', // optional | string | ex. authenticated, anonymous\n},\nuser_data: {\nuser_id: \"&lt;user_id&gt;\", // recommended | string | ex. 1234567890\nuser_type: '&lt;user_type&gt;' // optional | string | ex. new, returning\n}\n});\n</code></pre>"},{"location":"events/authentication/login/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of method string recommended The method used to login. google, linkedin, email and password user_id string recommended The user identifier 1234567890 user_login_state string contextual Set on all events with the authentication status of the visitor. authenticated, anonymous user_type string contextual Set on all events with the authentication type of the visitor are they new or returning new, returning"},{"location":"events/authentication/logout/","title":"Logout","text":"<p>Fire whenever a user logs out of an account.</p>"},{"location":"events/authentication/logout/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User logs out of an account\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ user_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"logout\",\npage_data: {\nuser_login_state: '&lt;user_login_state&gt;', // optional | string | ex. anonymous\n},\nuser_data: {\nuser_id: \"&lt;user_id&gt;\", // recommended | string | ex. 1234567890\n}\n});\n</code></pre>"},{"location":"events/authentication/logout/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of user_id string recommended The user identifier 1234567890 user_login_state string contextual Set on all events with the authentication status of the visitor. anonymous"},{"location":"events/authentication/sign_up/","title":"Sign Up","text":"<p>Fire whenever a user successfully creates an account.</p>"},{"location":"events/authentication/sign_up/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User successfully creates an account\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'sign_up',\nevent_data: {\nmethod: '&lt;method&gt;' // recommended | string | ex. local, social_login\n}\n});\n</code></pre>"},{"location":"events/authentication/sign_up/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of method string recommended The method by which a user created a new account. local, social_login"},{"location":"events/authentication/sign_up_start/","title":"Sign Up Start","text":"<p>Fire whenever a user views the first step of the account creation form.</p>"},{"location":"events/authentication/sign_up_start/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User views the first step of account creation process\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'sign_up_start'\nevent_data: {\nmethod: '&lt;method&gt;' // recommended | string | ex. local, social_login\n}\n});\n</code></pre>"},{"location":"events/authentication/sign_up_start/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of method string recommended The method by which a user created a new account. local, social_login"},{"location":"events/carousel/next_carousel_slide/","title":"Next Carousel Slide","text":"<p>Fire whenever a user interacts with the next carousel slide control</p>"},{"location":"events/carousel/next_carousel_slide/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;a href=\"&lt;link_url&gt;\"\ndata-layer-event=\"next_carousel_slide\"\ndata-layer-identifier=\"&lt;identifier&gt;\"\ndata-layer-name=\"&lt;name&gt;\"\ndata-layer-index=\"&lt;index&gt;\"\ndata-layer-target_index=\"&lt;target_index&gt;\"\n&gt;\n</code></pre>"},{"location":"events/carousel/next_carousel_slide/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User interacts with 'next' carousel slide control\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"next_carousel_slide\",\nevent_data: {\nidentifier: \"&lt;identifier&gt;\", // REQUIRED | string | ex. 12345abcde12345\nname: \"&lt;name&gt;\", // recommended | string | ex. Most Popular Blog Posts, 2    \nindex: \"&lt;index&gt;\", // recommended | integer | ex. 1 | min. lgth. 1 | min. 1\ntarget_index: \"&lt;target_index&gt;\" // recommended | integer | ex. 2 | min. lgth. 1 | min. 1 \n}\n});\n</code></pre>"},{"location":"events/carousel/next_carousel_slide/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string required The computer-readable machine name of the carousel. Use UUID provided by the component 12345abcde12345 name string recommended The human-readable name of the carousel. If user does not input one, populate with numerical index of which carousel this is on the page (1-indexed) Most Popular Blog Posts, 2 index integer recommended The slide # the carousel is on at time of interaction (1-indexed) 1 1 1 target_index integer recommended The slide # of the target slide (1-indexed) 2 1 1"},{"location":"events/carousel/previous_carousel_slide/","title":"Previous Carousel Slide","text":"<p>Fire whenever a user interacts with the previous carousel slide control</p>"},{"location":"events/carousel/previous_carousel_slide/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;a href=\"&lt;link_url&gt;\"\ndata-layer-event=\"previous_carousel_slide\"\ndata-layer-identifier=\"&lt;identifier&gt;\"\ndata-layer-name=\"&lt;name&gt;\"\ndata-layer-index=\"&lt;index&gt;\"\ndata-layer-target_index=\"&lt;target_index&gt;\"\n&gt;\n</code></pre>"},{"location":"events/carousel/previous_carousel_slide/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User interacts with 'previous' carousel slide control\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'previous_carousel_slide',\nevent_data: {\nidentifier: \"&lt;identifier&gt;\", // REQUIRED | string | ex. 12345abcde12345\nname: \"&lt;name&gt;\", // recommended | string | ex. Most Popular Blog Posts, 2    \nindex: \"&lt;index&gt;\", // recommended | integer | ex. 1 | min. lgth. 1 | min. 1\ntarget_index: \"&lt;target_index&gt;\" // recommended | integer | ex. 2 | min. lgth. 1 | min. 1 \n}\n});\n</code></pre>"},{"location":"events/carousel/previous_carousel_slide/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string required The computer-readable machine name of the carousel. Use UUID provided by the component 12345abcde12345 name string recommended The human-readable name of the carousel. If user does not input one, populate with numerical index of which carousel this is on the page (1-indexed) Most Popular Blog Posts, 2 index integer recommended The slide # the carousel is on at time of interaction (1-indexed) 1 1 1 target_index integer recommended The slide # of the target slide (1-indexed) 2 1 1"},{"location":"events/carousel/specific_carousel_slide/","title":"Specific Carousel Slide","text":"<p>Fire whenever a user interacts with the specific carousel slide control</p>"},{"location":"events/carousel/specific_carousel_slide/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;a href=\"&lt;link_url&gt;\"\ndata-layer-event=\"specific_carousel_slide\"\ndata-layer-identifier=\"&lt;identifier&gt;\"\ndata-layer-name=\"&lt;name&gt;\"\ndata-layer-index=\"&lt;index&gt;\"\ndata-layer-target_index=\"&lt;target_index&gt;\"\n&gt;\n</code></pre>"},{"location":"events/carousel/specific_carousel_slide/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User interacts with a specific carousel slide control\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'specific_carousel_slide',\nevent_data: {\nidentifier: \"&lt;identifier&gt;\", // REQUIRED | string | ex. 12345abcde12345\nname: \"&lt;name&gt;\", // recommended | string | ex. Most Popular Blog Posts, 2    \nindex: \"&lt;index&gt;\", // recommended | integer | ex. 1 | min. lgth. 1 | min. 1\ntarget_index: \"&lt;target_index&gt;\" // recommended | integer | ex. 2 | min. lgth. 1 | min. 1 \n}\n});\n</code></pre>"},{"location":"events/carousel/specific_carousel_slide/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string required The computer-readable machine name of the carousel. Use UUID provided by the component 12345abcde12345 name string recommended The human-readable name of the carousel. If user does not input one, populate with numerical index of which carousel this is on the page (1-indexed) Most Popular Blog Posts, 2 index integer recommended The slide # the carousel is on at time of interaction (1-indexed) 1 1 1 target_index integer recommended The slide # of the target slide (1-indexed) 2 1 1"},{"location":"events/chat/chat_complete/","title":"Chat Complete","text":"<p>Fire whenever a user closes or otherwise completes a chat session. </p>"},{"location":"events/chat/chat_complete/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User closes or otherwise completes a chat session\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'chat_complete',\nevent_data: {\nidentifier: '&lt;identifier&gt;', // optional | string | ex. ecp_locator, free_trial\nname: '&lt;name&gt;', // optional | string | ex. ecp_locator, free_trial\ntype: '&lt;type&gt;' // optional | string | ex. contact, lead_generation\n}\n});\n</code></pre>"},{"location":"events/chat/chat_complete/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string optional The chat machine-readable name. This should be a unique value specific to this chat prompt, if one exists. If one does not exist, this can also be populated with the same value as the . ecp_locator, free_trial name string optional The chat prompt human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the chat with. It should be lowercase snake_case. ecp_locator, free_trial type string optional The chat type. This will act as a filtering mechanism in reporting to enable analysts to view chat droppoff funnels. It can also act as an internal aid in firing additional events if necessary. For instance, lead-generating chats require a <code>generate_lead</code> event to be fired alongside <code>chat_complete</code>, and that could be written into the logic based upon this field. contact, lead_generation"},{"location":"events/chat/chat_error/","title":"Chat Error","text":"<p>Fire whenever a user experiences an error during a chat session.</p>"},{"location":"events/chat/chat_error/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User experiences an error during a chat session\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'chat_error',\nevent_data: {\nerror_message: '&lt;error_message&gt;', // REQUIRED | string | ex. Phone number should follow the format (xxx) xxx-xxxx, Must be a valid email address    \nidentifier: '&lt;identifier&gt;', // optional | string | ex. ecp_locator, free_trial\nname: '&lt;name&gt;', // optional | string | ex. ecp_locator, free_trial\ntype: '&lt;type&gt;', // optional | string | ex. contact, lead_generation\n}\n});\n</code></pre>"},{"location":"events/chat/chat_error/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of error_message string required The specific error that occurred. If an error message is shown to the user, this should be populated with that text. Phone number should follow the format (xxx) xxx-xxxx, Must be a valid email address identifier string optional The chat machine-readable name. This should be a unique value specific to this chat prompt, if one exists. If one does not exist, this can also be populated with the same value as the . ecp_locator, free_trial name string optional The chat prompt human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the chat with. It should be lowercase snake_case. ecp_locator, free_trial type string optional The chat type. This will act as a filtering mechanism in reporting to enable analysts to view chat droppoff funnels. It can also act as an internal aid in firing additional events if necessary. For instance, lead-generating chats require a <code>generate_lead</code> event to be fired alongside <code>chat_complete</code>, and that could be written into the logic based upon this field. contact, lead_generation"},{"location":"events/chat/chat_start/","title":"Chat Start","text":"<p>Fire whenever a user initiates a chat session. </p>"},{"location":"events/chat/chat_start/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User initiates a chat session\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'chat_start',\nevent_data: {\nidentifier: '&lt;identifier&gt;', // optional | string | ex. ecp_locator, free_trial\nname: '&lt;name&gt;', // optional | string | ex. ecp_locator, free_trial\ntype: '&lt;type&gt;' // optional | string | ex. contact, lead_generation\n}\n});\n</code></pre>"},{"location":"events/chat/chat_start/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string optional The chat machine-readable name. This should be a unique value specific to this chat prompt, if one exists. If one does not exist, this can also be populated with the same value as the . ecp_locator, free_trial name string optional The chat prompt human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the chat with. It should be lowercase snake_case. ecp_locator, free_trial type string optional The chat type. This will act as a filtering mechanism in reporting to enable analysts to view chat droppoff funnels. It can also act as an internal aid in firing additional events if necessary. For instance, lead-generating chats require a <code>generate_lead</code> event to be fired alongside <code>chat_complete</code>, and that could be written into the logic based upon this field. contact, lead_generation"},{"location":"events/chat/chat_view/","title":"Chat View","text":"<p>Fire whenever a user is presented with a chat prompt on a page.</p>"},{"location":"events/chat/chat_view/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User presented with a chat prompt on a page\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'chat_view',\nevent_data: {\nidentifier: '&lt;identifier&gt;', // optional | string | ex. ecp_locator, free_trial\nname: '&lt;name&gt;', // optional | string | ex. ecp_locator, free_trial\ntype: '&lt;type&gt;' // optional | string | ex. contact, lead_generation\n}\n});\n</code></pre>"},{"location":"events/chat/chat_view/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string optional The chat machine-readable name. This should be a unique value specific to this chat prompt, if one exists. If one does not exist, this can also be populated with the same value as the . ecp_locator, free_trial name string optional The chat prompt human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the chat with. It should be lowercase snake_case. ecp_locator, free_trial type string optional The chat type. This will act as a filtering mechanism in reporting to enable analysts to view chat droppoff funnels. It can also act as an internal aid in firing additional events if necessary. For instance, lead-generating chats require a <code>generate_lead</code> event to be fired alongside <code>chat_complete</code>, and that could be written into the logic based upon this field. contact, lead_generation"},{"location":"events/content/select_content/","title":"Select Content","text":"<p>Fire whenever a user clicks on a content link found in a list that forwards the user to the content page. List types include card collections, search results, carousels, and other similar components.</p> <p>??? info \"How this event is used in reporting</p> <pre><code>This event is to be used to understand how content is being engaged with in regard to the lists they are a part of. If an analyst is looking to report on how much a piece of content was engaged with and want/need to know the list information, they must use \"select_content\" in their GA4 report as the event and NOT \"[view_content](../../events/content/view_content.md)\". This is because \"[view_content](../../events/content/view_content.md)\" will not have associated list information.\n</code></pre> <p>Pairs with the following event: - View Content List</p> <p>Warning</p> <p>Do not fire this event for content links found in menus.</p>"},{"location":"events/content/select_content/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;a href=\"&lt;link_url&gt;\"\ndata-layer-event=\"select_content\"\ndata-layer-facets=\"&lt;facets&gt;\"\ndata-layer-identifier=\"&lt;identifier&gt;\"\ndata-layer-index=\"&lt;index&gt;\"\ndata-layer-list_type=\"&lt;list_type&gt;\"\ndata-layer-name=\"&lt;name&gt;\"\ndata-layer-search_term=\"&lt;search_term&gt;\"\ndata-layer-search_type=\"&lt;search_type&gt;\"\n&gt;\n</code></pre>"},{"location":"events/content/select_content/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User clicks on a content link found in a list (cards, search, promotions...) that forwards to the content page\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"select_content\",\nevent_data: {\ncontent_type: \"&lt;content_type&gt;\", // REQUIRED | string | ex. article, blog, page  \nfacets: \"&lt;facets&gt;\", // contextual | string - double delimited (:)(~) | category:skin_health~featured_as:best_seller \nidentifier: \"&lt;identifier&gt;\", // REQUIRED | string | ex. ecp_locator, free_trial\nindex: \"&lt;index&gt;\", // REQUIRED | integer | ex. 5\nlist_type: \"&lt;list_type&gt;\", // REQUIRED | string | ex. cards, search_results  \nname: \"&lt;name&gt;\", // REQUIRED | string | ex. purchase_product\nsearch_term: \"&lt;search_term&gt;\", // contextual | string | ex. sunscreen\nsearch_type: \"&lt;search_type&gt;\", // contextual | string | site, filter_by_group    \n}\n});\n</code></pre>"},{"location":"events/content/select_content/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Maximum Length content_type <code>string</code> required The type of content selected by the user. Use \"page\" if no more specific content_type applies or if the capability to distinguish between content_types does not currenly exist. <code>article, blog, page</code> <code>100</code> facets <code>string</code> contextual A double-delimited string of key/value pairs representing the refinements that were applied to this search. Only set if the list type is a search result or filter_by_group. <code>category:skin_health~skin_concern: acne~featured_as:best_seller</code> <code>100</code> identifier <code>string</code> required The form machine-readable name. This should be a unique value specific to this piece of content, if one exists. If one does not exist, this can also be populated with the same value as the . <code>ecp_locator, free_trial</code> <code>100</code> index <code>integer</code> required The numerical index of the item position (1-indexed). For instance, if this is the 5th search result, you would send 5 here. If this is the 3rd card in a single row, send 3. If this is the 2nd item in the 3rd row of a 3-up card layout, send 8 (3 + 3 + 2). <code>5</code> <code>100</code> list_type <code>string</code> required The type of list the item was found in. <code>cards, search_results</code> <code>100</code> name <code>string</code> required The form human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the form with. It should be lowercase snake_case. <code>purchase_product</code> <code>100</code> search_term <code>string</code> contextual The final search term submitted after any correction has been performed. Only set if the <code>list_type</code> is <code>search_results</code>. <code>sunscreen</code> <code>100</code> search_type <code>string</code> contextual The type of search performed. Only set if the <code>list_type</code> is <code>search_results</code>. <code>site, filter_by_group</code> <code>100</code>"},{"location":"events/content/view_content/","title":"View Content","text":"<p>Fire whenever a page whose main purpose is to serve content (e.g. an article or blog post) loads.</p> <p>This event is to be used to understand when content is being viewed without any association to a \"Content List\".</p> How this event data is used in reporting <p>If an analyst is looking to report on how often a piece of content was engaged with and wants to know the list information (as opposed to how often a content page was viewed), they would use the \"select_content\" in a GA4 report (as opposed to \"view_content\"). This is because \"view_content\" will not have associated list information.</p>"},{"location":"events/content/view_content/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User views an article, blog post, or other content-focused page\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"view_content\",\nevent_data: {\ncontent_type: \"&lt;content_type&gt;\", // REQUIRED | string | ex. article, blog, page      \nidentifier: \"&lt;identifier&gt;\", // REQUIRED | string | ex. ecp_locator, free_trial\nname: \"&lt;name&gt;\", // REQUIRED | string | ex. purchase_product\n}\n});\n</code></pre>"},{"location":"events/content/view_content/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Maximum Length content_type <code>string</code> required The type of content selected by the user. Use \"page\" if no more specific content_type applies or if the capability to distinguish between content_types does not currenly exist. <code>article, blog, page</code> <code>100</code> identifier <code>string</code> required The form machine-readable name. This should be a unique value specific to this piece of content, if one exists. If one does not exist, this can also be populated with the same value as the . <code>ecp_locator, free_trial</code> <code>100</code> name <code>string</code> required The form human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the form with. It should be lowercase snake_case. <code>purchase_product</code> <code>100</code>"},{"location":"events/content/view_content_listing/","title":"View Content Listing","text":"<p>Fire whenever a content listing (e.g. Article Card Section, Article List View, etc.) appears on a page.</p> <p>If multiple content listings appear on a page, then one <code>view_content_list</code> event message for each content listing should be sent to the data layer.</p> <p>Pairs with the following event: - Select Content</p>"},{"location":"events/content/view_content_listing/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User views a listing of articles, article cards, etc.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"view_content_list\",\nevent_data: {\nlist_type: \"&lt;list_type&gt;\", // REQUIRED | string | e.g. \"article_card_section\", \"article_list_view\"\nidentifier: \"&lt;identifier&gt;\", // REQUIRED | string | e.g. \"featured_articles\", \"related_blog_posts\"\nname: \"&lt;name&gt;\", // REQUIRED | string | e.g. \"featured_articles\", \"related_blog_posts\"\n}\n});\n</code></pre>"},{"location":"events/content/view_content_listing/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Maximum Length list_type <code>string</code> required The type of list the item was found in. <code>\"article_card_section\"</code>, <code>\"article_list_view\"</code> <code>100</code> identifier <code>string</code> required The form machine-readable name. This should be a unique value specific to this piece of content, if one exists. If one does not exist, this can also be populated with the same value as the . <code>\"featured_articles\"</code>, <code>\"related_blog_posts\"</code> <code>100</code> name <code>string</code> required The form human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the form with. It should be lowercase snake_case. <code>\"featured_articles\"</code>, <code>\"related_blog_posts\"</code> <code>100</code>"},{"location":"events/coupon/coupon_print/","title":"Coupon Print","text":"<p>Fire whenever a user attempts to print a coupon.</p>"},{"location":"events/coupon/coupon_print/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User attempts to print a coupon\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'coupon_print',\nevent_data: {\ncoupons: '&lt;coupons&gt;', // REQUIRED | string - delimited (~) | ex. couponName1~couponName2~couponName3    \n}\n});\n</code></pre>"},{"location":"events/coupon/coupon_print/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of <code>event_data.coupons</code> delimited string required A delimited string of coupons that the user selected and is now downloading or printing. <code>couponName1~couponName2~couponName3</code>"},{"location":"events/coupon/coupon_print_error/","title":"Coupon Print Error","text":"<p>Fire whenever a user encounters an error printing a coupon. </p>"},{"location":"events/coupon/coupon_print_error/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User encounters and error printing a coupon\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'coupon_print_error',\nevent_data: {\ncoupons: '&lt;coupons&gt;', // REQUIRED | string - delimited (~) | ex. couponName1~couponName2~couponName3    \nerror_message: '&lt;error_message&gt;', // REQUIRED | string | ex. Phone number should follow the format (xxx) xxx-xxxx, Must be a valid email address    \n}\n});\n</code></pre>"},{"location":"events/coupon/coupon_print_error/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of coupons delimited string required A delimited string of coupons that the user selected and is now downloading or printing. couponName1\\~couponName2\\~couponName3 error_message string required The specific error that occurred. If an error message is shown to the user, this should be populated with that text. Phone number should follow the format (xxx) xxx-xxxx, Must be a valid email address"},{"location":"events/coupon/coupon_rebate_offer/","title":"Coupon Rebate Offer","text":"<p>Fire whenever a user is presented with a coupon rebate offer.</p>"},{"location":"events/coupon/coupon_rebate_offer/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User presented with coupon rebate offer\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'coupon_rebate_offer',\nevent_data: {\ncoupons: '&lt;coupons&gt;', // REQUIRED | string - delimited (~) | ex. couponName1~couponName2~couponName3    \n}\n});\n</code></pre>"},{"location":"events/coupon/coupon_rebate_offer/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of coupons delimited string required A delimited string of coupons that the user selected and is now downloading or printing. couponName1\\~couponName2\\~couponName3"},{"location":"events/coupon/select_coupon/","title":"Select Coupon","text":"<p>Fire whenever a user selects a coupon.</p>"},{"location":"events/coupon/select_coupon/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User selects a coupon\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'select_coupon',\nevent_data: {\nidentifier: '&lt;identifier&gt;', // recommended | string | ex. neutrogena_discount, free_shipping_q421\nname: '&lt;name&gt;', // REQUIRED | string | ex. neutrogena_discount, free_shipping_q421\ntype: '&lt;type&gt;' // recommended | string | ex. discount, promo\n}\n});\n</code></pre>"},{"location":"events/coupon/select_coupon/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string recommended The coupon machine-readable name. This should be a unique value specific to this coupon, if one exists. If one does not exist, this can also be populated with the same value as the <code>name</code>. neutrogena_discount, free_shipping_q421 name string required The coupon human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the coupon with. It should be lowercase snake_case. neutrogena_discount, free_shipping_q421 type string recommended The coupon type. This will act as a filtering mechanism in reporting to enable analysts to view coupon engagement. It can also act as an internal aid in firing additional events if necessary. discount, promo"},{"location":"events/ecommerce/add_payment_info/","title":"Add Payment Info","text":"<p>Fire whenever a user submits their payment information. This event will fire AFTER the user has successfully completed the \"Add Payment Info\" step and has done the following:</p> <ol> <li>Payment info has populated all required payment fields.</li> <li>The user has selected to move on to the next step (e.g. shipping info, order review, etc.).</li> <li>The system has successfully verified the payment info and moves the user from the payment step to the following step.</li> </ol> <p>Pairs with the following events: - Begin Checkout - Add Shipping Info</p>"},{"location":"events/ecommerce/add_payment_info/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User user submits payment information\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.\ndataLayer.push({\nevent: \"add_payment_info\",\necommerce: {\ncoupon: \"&lt;coupon&gt;\", // contextual | string | ex. SUMMER_FUN | pattern: ^[A-Za-z0-9_]+$\ncurrency: \"&lt;currency&gt;\", // REQUIRED | string | ex. USD | pattern: ^[A-Z]{3}$ | min. 3, max. 3\nitems: \"&lt;items&gt;\", // REQUIRED | array | ex. [{item_id: \"test\"}] \npayment_method: \"&lt;payment_method&gt;\", // REQUIRED | string | ex. credit_card | pattern: ^[a-z_]+$\nvalue: \"&lt;value&gt;\" // REQUIRED | number | ex. 7.77 | pattern: ^\\d\\.\\d\\d$ | min. 0.00\n}\n});\n</code></pre>"},{"location":"events/ecommerce/add_payment_info/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Minimum Length Maximum Length Minimum coupon string contextual The coupon name/code associated with the event. Event-level and item-level coupon parameters are independent. <code>SUMMER_FUN</code> <code>100</code> currency string required Currency of the items associated with the event, in 3-letter ISO 4217 format. <code>USD</code> <code>^[A-Z]{3}$</code> <code>3</code> <code>3</code> items array of items required Populate with item objects that represent the product(s) currently in the cart during the checkout process. <code>[{item_id: \"test\"}]</code> payment_method string required The chosen method of payment. <code>credit_card</code> <code>100</code> value number required The monetary value of the event. Does not include currency sign. <code>7.77</code> <code>^\\d\\.\\d\\d$</code> <code>100</code> <code>0.00</code>"},{"location":"events/ecommerce/add_shipping_info/","title":"Add Shipping Info","text":"<p>Fire whenever a user submits their shipping information. This event will fire AFTER the user has successfully completed the \"Add Shipping Info\" step and has done the following:</p> <ol> <li>Shipping info has populated all required shipping fields.</li> <li>The user has selected to move on to the next step (e.g. payment info, order review, etc.).</li> <li>The system has successfully verified the shipping info and moves the user from the shipping step to the following step.</li> </ol> <p>Pairs with the following events: - Begin Checkout - Add Payment Info</p>"},{"location":"events/ecommerce/add_shipping_info/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User user submits shipping information\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.\ndataLayer.push({\nevent: \"add_shipping_info\",\necommerce: {\ncoupon: \"&lt;coupon&gt;\", // contextual | string | ex. SUMMER_FUN\ncurrency: \"&lt;currency&gt;\", // REQUIRED | string | ex. USD | pattern: ^[A-Z]{3}$ | min. 3, max. 3\nitems: \"&lt;items&gt;\", // REQUIRED | array | ex. [{item_id: \"test\"}] \nshipping_tier: \"&lt;shipping_tier&gt;\", // contextual | string | ex. ground | pattern: ^[a-z_]+$\nvalue: \"&lt;value&gt;\" // REQUIRED | number | ex. 7.77 | pattern: ^\\d\\.\\d\\d$ | min. 0.00\n}\n});\n</code></pre>"},{"location":"events/ecommerce/add_shipping_info/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Minimum Length Maximum Length Minimum coupon string contextual The coupon name/code associated with the event. Event-level and item-level coupon parameters are independent. <code>SUMMER_FUN</code> <code>100</code> currency string required Currency of the items associated with the event, in 3-letter ISO 4217 format. <code>USD</code> <code>^[A-Z]{3}$</code> <code>3</code> <code>3</code> items array of items required Populate with item objects that represent the product(s) currently in the cart during the checkout process. <code>[{item_id: \"test\"}]</code> shipping_tier string contextual The shipping method selected for delivery of the purchased item(s). <code>ground</code> <code>100</code> value number required The monetary value of the event. Does not include currency sign. <code>7.77</code> <code>^\\d\\.\\d\\d$</code> <code>100</code> <code>0.00</code>"},{"location":"events/ecommerce/add_to_cart/","title":"Add To Cart","text":"<p>Fire whenever a user adds one or more items to their cart.</p>"},{"location":"events/ecommerce/add_to_cart/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User adds one or more items to cart\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.\ndataLayer.push({\nevent: \"add_to_cart\",\necommerce: {\ncurrency: \"&lt;currency&gt;\", // REQUIRED | string | ex. USD | pattern: ^[A-Z]{3}$ | min. 3| max. 3\nitems: \"&lt;items&gt;\", // REQUIRED | array | ex. [{item_id: \"test\"}]\nvalue: \"&lt;value&gt;\" // REQUIRED | number | ex. 7.77 | pattern: ^\\d\\.\\d\\d$ | min. 0.00\n}\n});\n</code></pre>"},{"location":"events/ecommerce/add_to_cart/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Minimum Length Maximum Length Minimum currency string required Currency of the items associated with the event, in 3-letter ISO 4217 format. <code>USD</code> <code>^[A-Z]{3}$</code> <code>3</code> <code>3</code> items array of items required Populate with item objects that represent the product(s) added to the cart. <code>[{item_id: \"test\"}]</code> value number required The monetary value of the event. Does not include currency sign. <code>7.77</code> <code>^\\d\\.\\d\\d$</code> <code>100</code> <code>0.00</code>"},{"location":"events/ecommerce/add_to_wishlist/","title":"Add to Wishlist","text":"<p>Send when a user adds an item to their wishlist.</p>"},{"location":"events/ecommerce/add_to_wishlist/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User user adds item(s) to wishlist\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.\ndataLayer.push({\nevent: \"add_to_wishlist\",\necommerce: {\ncurrency: \"&lt;currency&gt;\", // REQUIRED | string | ex. USD | pattern: ^[A-Z]{3}$ | min. 3| max. 3\nitems: \"&lt;items&gt;\", // REQUIRED | array | ex. [{item_id: \"test\"}]\nvalue: \"&lt;value&gt;\" // REQUIRED | number | ex. 7.77 | pattern: ^\\d\\.\\d\\d$ | min. 0.00\n}\n});\n</code></pre>"},{"location":"events/ecommerce/add_to_wishlist/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Minimum Length Maximum Length Minimum currency string required Currency of the items associated with the event, in 3-letter ISO 4217 format. <code>USD</code> <code>^[A-Z]{3}$</code> <code>3</code> <code>3</code> items array of items required Populate with item objects that represent the product(s) added to the wishlist. <code>[{item_id: \"test\"}]</code> value number required The monetary value of the event. Does not include currency sign. <code>7.77</code> <code>^\\d\\.\\d\\d$</code> <code>100</code> <code>0.00</code>"},{"location":"events/ecommerce/begin_checkout/","title":"Begin Checkout","text":"<p>Fire whenever a user begins a checkout. This event is not the same as the ecommerce event \"View Cart\". This event will fire once the user initiates the checkout funnel. Examples of where the \"begin_checkout\" event should fire are (but only ONCE during checkout and will be the FIRST thing that fires): - The user views the INITIAL form to fill out shipping information - The user views the INITIAL form to fill out payment information - the user view the INITIAL screen to either log in or create an account to proceed with their checkout</p> <p>Pairs with the following events: - Add Payment Info - Add Shipping Info</p>"},{"location":"events/ecommerce/begin_checkout/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User begins a checkout\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.\ndataLayer.push({\nevent: \"begin_checkout\",\necommerce: {\ncoupon: \"&lt;coupon&gt;\", // contextual | string | ex. SUMMER_FUN\ncurrency: \"&lt;currency&gt;\", // REQUIRED | string | ex. USD | pattern: ^[A-Z]{3}$ | min. 3| max. 3\nitems: \"&lt;items&gt;\", // REQUIRED | array | ex. [{item_id: \"test\"}]\nvalue: \"&lt;value&gt;\" // REQUIRED | number | ex. 7.77 | pattern: ^\\d\\.\\d\\d$ | min. 0.00\n}\n});\n</code></pre>"},{"location":"events/ecommerce/begin_checkout/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Minimum Length Maximum Length Minimum coupon string contextual The coupon name/code associated with the event. Event-level and item-level coupon parameters are independent. <code>SUMMER_FUN</code> <code>100</code> currency string required Currency of the items associated with the event, in 3-letter ISO 4217 format. <code>USD</code> <code>^[A-Z]{3}$</code> <code>3</code> <code>3</code> items array of items required Populate with item objects that represent the product(s) currently in the cart during the checkout process. <code>[{item_id: \"test\"}]</code> value number required The monetary value of the event. Does not include currency sign. <code>7.77</code> <code>^\\d\\.\\d\\d$</code> <code>100</code> <code>0.00</code>"},{"location":"events/ecommerce/purchase/","title":"Purchase","text":"<p>Fire whenever a user purchases one or more items. The Google Analytics 4 schema has some very extreme requirements about what is needed to be recognized as a true purchase/transaction. The following parameters are 100% REQUIRED when implementing the purchase event:</p> <ul> <li>Transaction ID (transaction_id)</li> <li>Currency (currency)</li> <li>Items (items)</li> <li>Value (value)</li> </ul> <p>If any of the above parameters are not present, the transaction will NOT be recognized by Google Analytics 4, which can result in no ecommerce information being processed. </p>"},{"location":"events/ecommerce/purchase/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User purchases on or more items\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.\ndataLayer.push({\nevent: \"purchase\",\necommerce: {\naffiliation: \"&lt;affiliation&gt;\", // REQUIRED | string | ex. walgreens, listerine online store | pattern: ^[A-Za-z0-9_]+$   \ncoupon: \"&lt;coupon&gt;\", // contextual | string | ex. SUMMER_FUN | pattern: ^[A-Za-z0-9_]+$ \ncurrency: \"&lt;currency&gt;\", // REQUIRED | string | ex. USD | pattern: ^[A-Z]{3}$ | min. 3, max. 3\nitems: \"&lt;items&gt;\", // REQUIRED | array | ex. [{item_id: \"test\"}]\nshipping: \"&lt;shipping&gt;\", // REQUIRED | number | ex. 3.33 | pattern: ^\\d\\.\\d\\d$   | min. 0.00\ntax: \"&lt;tax&gt;\", // REQUIRED | number | ex. 1.11 | pattern: ^\\d\\.\\d\\d$ | min. 0.00\ntransaction_id: \"&lt;transaction_id&gt;\", // REQUIRED | string | T12345\nvalue: \"&lt;value&gt;\" // REQUIRED | number | ex. 7.77 | pattern: ^\\d\\.\\d\\d$  | min. 0.00\n}\n});\n</code></pre>"},{"location":"events/ecommerce/purchase/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Minimum Length Maximum Length Minimum affiliation string required A product affiliation to designate a supplying company or brick and mortar store location. Event-level and item-level affiliation parameters are independent. <code>walgreens</code>,<code>listerine online store</code> <code>100</code> coupon string contextual The coupon name/code associated with the event. Event-level and item-level coupon parameters are independent. <code>SUMMER_FUN</code> <code>100</code> currency string required Currency of the items associated with the event, in 3-letter ISO 4217 format. <code>USD</code> <code>^[A-Z]{3}$</code> <code>3</code> <code>3</code> items array of items required Populate with items objects that represent the product(s) purchased. <code>[{item_id: \"test\"}]</code> shipping number required Shipping cost associated with a transaction. Does not include currency sign. <code>3.33</code> <code>^\\d\\.\\d\\d$</code> <code>100</code> <code>0.00</code> tax number required Tax cost associated with a transaction. Does not include currency sign. <code>1.11</code> <code>^\\d\\.\\d\\d$</code> 100 <code>0.00</code> transaction_id string required The unique identifier of a transaction. <code>T12345</code> <code>100</code> value number required The monetary value of the event. Does not include currency sign. <code>7.77</code> <code>^\\d\\.\\d\\d$</code> <code>100</code> <code>0.00</code>"},{"location":"events/ecommerce/refund/","title":"Refund","text":"<p>Fire whenever a refund is issued. The Google Analytics 4 schema has some very extreme requirements about what is needed to be recognized as a true refund/transaction. The following parameters are 100% REQUIRED when implementing the refund event for a PARTIAL REFUND:</p> <ul> <li>Transaction ID (transaction_id)</li> <li>Currency (currency)</li> <li>Value (value)</li> <li>Items (items</li> </ul> <p>The following parameters are 100% REQUIRED when implementing the refund event for a FULL REFUND:</p> <ul> <li>Transaction ID (transaction_id)</li> <li>Currency (currency)</li> <li>Value (value)</li> </ul> <p>You may notice the \"item Array\" is not present in the FULL REFUND events like it is the PARTIAL REFUND event and the \"Purchase Event\", this is because when performing a FULL REFUND GA4 will assume all products have been returned.</p>"},{"location":"events/ecommerce/refund/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User refund is issued\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.\ndataLayer.push({\nevent: \"refund\",\necommerce: {\naffiliation: \"&lt;affiliation&gt;\", // REQUIRED | string | ex. walgreens, listerine online store |\ncoupon: \"&lt;coupon&gt;\", // contextual | string | ex. SUMMER_FUN |\ncurrency: \"&lt;currency&gt;\", // REQUIRED | string | ex. USD | pattern: ^[A-Z]{3}$ | min. 3, max. 3\nitems: \"&lt;items&gt;\", // REQUIRED | array | ex. [{item_id: \"test\"}]\nshipping: \"&lt;shipping&gt;\", // REQUIRED | number | ex. 3.33 | pattern: ^\\d\\.\\d\\d$   | min. 0.00\ntax: \"&lt;tax&gt;\", // REQUIRED | number | ex. 1.11 | pattern: ^\\d\\.\\d\\d$ | min. 0.00\ntransaction_id: \"&lt;transaction_id&gt;\", // REQUIRED | string | ex. T12345\nvalue: \"&lt;value&gt;\" // REQUIRED | number | ex. 7.77 | pattern: ^\\d\\.\\d\\d$ | min. 0.00\n}\n});\n</code></pre>"},{"location":"events/ecommerce/refund/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Minimum Length Maximum Length Minimum affiliation string required A product affiliation to designate a supplying company or brick and mortar store location. Event-level and item-level affiliation parameters are independent. <code>walgreens</code>,<code>listerine online store</code> <code>100</code> coupon string contextual The coupon name/code associated with the event. Event-level and item-level coupon parameters are independent. <code>SUMMER_FUN</code> <code>100</code> currency string required Currency of the items associated with the event, in 3-letter ISO 4217 format. <code>USD</code> <code>^[A-Z]{3}$</code> <code>3</code> <code>3</code> items array of items required Populate with item objects that represent the product(s) returned. Note that items is required for partial refunds but it can be omitted for full refunds. <code>[{item_id: \"test\"}]</code> shipping number required Shipping cost associated with a transaction. Does not include currency sign. <code>3.33</code> <code>^\\d\\.\\d\\d$</code> <code>100</code> <code>0.00</code> tax number required Tax cost associated with a transaction. Does not include currency sign. <code>1.11</code> <code>^\\d\\.\\d\\d$</code> <code>100</code> <code>0.00</code> transaction_id string required The unique identifier of a transaction. <code>T12345</code> <code>100</code> value number required The monetary value of the event. Does not include currency sign. <code>7.77</code> <code>^\\d\\.\\d\\d$</code> <code>100</code> <code>0.00</code>"},{"location":"events/ecommerce/remove_from_cart/","title":"Remove From Cart","text":"<p>Fire whenever a user removes one or more items from their cart.</p>"},{"location":"events/ecommerce/remove_from_cart/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User removes one or more items from cart\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.\ndataLayer.push({\nevent: \"remove_from_cart\",\necommerce: {\ncurrency: \"&lt;currency&gt;\", // REQUIRED | string | ex. USD | pattern: ^[A-Z]{3}$ | min. 3| max. 3\nitems: \"&lt;items&gt;\", // REQUIRED | array | ex. [{item_id: \"test\"}]\nvalue: \"&lt;value&gt;\" // REQUIRED | number | ex. 7.77 | pattern: ^\\d\\.\\d\\d$ | min. 0.00\n}\n});\n</code></pre>"},{"location":"events/ecommerce/remove_from_cart/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Minimum Length Maximum Length Minimum currency string required Currency of the items associated with the event, in 3-letter ISO 4217 format. <code>USD</code> <code>^[A-Z]{3}$</code> <code>3</code> <code>3</code> items array of items required Populate with item objects that represent the product(s) removed from the cart. <code>[{item_id: \"test\"}]</code> value number required The monetary value of the event. Does not include currency sign. <code>7.77</code> <code>^\\d\\.\\d\\d$</code> <code>100</code> <code>0.00</code>"},{"location":"events/ecommerce/select_item/","title":"Select Item","text":"<p>Fire whenever a user clicks on a product link found in a list that forwards the user to the product detail page. List types include cards, search, promotions, and similar components.</p> <p>If the site is not currently able to support differentiating products from content, then add the attributes/event for select_content instead and add a dev task to update the site to enable this differentiation.</p> <p>Do not fire this event for product links found in menus.</p>"},{"location":"events/ecommerce/select_item/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User clicks on a product link in a list (cards, search, promotions...) that forwards to a product detail page. \n// Do not use this event for product links found in menus.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.\ndataLayer.push({\nevent: \"select_item\",\necommerce: {\nfacets: \"&lt;facets&gt;\", // contextual | string - double delimited (:)(~) | category:skin_health~featured_as:best_seller \nitems: \"&lt;items&gt;\", // REQUIRED | array | ex. [{item_id: \"070501110485\", item_name: \"Neutrogena Hydro Boost Gel-Cream\"}]  \nitem_list_id: \"&lt;item_list_id&gt;\", // REQUIRED | string | ex. 12345abcde12345\nitem_list_name: \"&lt;item_list_name&gt;\", // REQUIRED | string | ex. filter_by_group, recommended_products, recently_viewed_products\nlist_type: \"&lt;list_type&gt;\", // REQUIRED | string | ex. cards, search_results  \nsearch_term: \"&lt;search_term&gt;\", // contextual | string | ex. sunscreen\nsearch_type: \"&lt;search_type&gt;\", // contextual | string | ex. site, filter_by_group\nindex: \"&lt;index&gt;\", // REQUIRED | integer | ex. 5\n}\n});\n</code></pre>"},{"location":"events/ecommerce/select_item/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Maximum Length facets delimited string contextual A double-delimited string of key/value pairs representing the refinements that were applied to this search. Only set if the list type is a search result or filter_by_group. <code>category:skin_health\\~skin_concern:acne\\ ~featured_as:best_seller</code> <code>100</code> items array of items required Populate with only the item that was selected. This should always be a single item array. <code>[{item_id: \"070501110485\", item_name: \"Neutrogena Hydro Boost Gel-Cream with Hyaluronic Acid for Extra-Dry Skin\"}]</code> item_list_id string required The computer-readable machine name of the list the item showed up in. Use UUID provided by the component if no more specific ID is available. <code>12345abcde12345</code> <code>100</code> item_list_name string required The human-readable name of the list the item showed up in. If one is not available, populate with numerical index of which list this is on the page (1-indexed). For <code>filter_by_group</code> component, use that value. <code>filter_by_group, recommended_products, recently_viewed_products</code> <code>100</code> list_type string required The type of list the item was found in. <code>cards, search_results</code> <code>100</code> search_term string contextual The final search term submitted after any correction has been performed. Only set if the <code>list_type</code> is <code>search_results</code>. <code>sunscreen</code> <code>100</code> search_type string contextual The type of search performed. Only set if the <code>list_type</code> is <code>search_results</code>. <code>site, filter_by_group</code> <code>100</code> index integer required The numerical index of the item position (1-indexed). For instance, if this is the 5th search result, you would send 5 here. If this is the 3rd card in a single row, send 3. If this is the 2nd item in the 3rd row of a 3-up card layout, send 8 (3 + 3 + 2). <code>5</code> <code>100</code>"},{"location":"events/ecommerce/select_promotion/","title":"Select Promotion","text":"<p>Fire whenever a user clicks on a promotion link located in a component that forwards the user to a promotional page or an item/product. Component types include cards, carousels, search, promotions, home screen hero images, and similar components. A promotion is usually a temporary presentation of information that is different than displaying a dynamic list which would normally send a View Item List.</p> <p>The most common use case of the \"select_promotion\" event is a hero image that is displayed on the home page of a brand site as this is most commonly a promotion space that will drive a user to a product or product list.</p> <p>Pairs with \"View Promotion\".</p>"},{"location":"events/ecommerce/select_promotion/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;a href=\"&lt;link_url&gt;\"\ndata-layer-event=\"select_promotion\"\ndata-layer-facets=\"&lt;facets&gt;\"\ndata-layer-list_type=\"&lt;list_type&gt;\"\ndata-layer-search_term=\"&lt;search_term&gt;\"\ndata-layer-search_type=\"&lt;search_type&gt;\"\ndata-layer-index=\"&lt;index&gt;\"\n&gt;\n</code></pre>"},{"location":"events/ecommerce/select_promotion/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User user clicks on a promotion link found in the promotion component (cards, carousels, search, promotions, home screen hero images) that forwards to a promotional page or an item/product\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.\ndataLayer.push({\nevent: \"select_promotion\",\necommerce: {\ncreative_name: \"&lt;creative_name&gt;\", // REQUIRED | string | ex. summer_banner2 \ncreative_slot: \"&lt;creative_slot&gt;\", // REQUIRED | string | ex. featured_hero_splash_1 \npromotion_id: \"&lt;promotion_id&gt;\", // REQUIRED | string | ex. P_12345\npromotion_name: \"&lt;promotion_name&gt;\", // REQUIRED | string | summer_sale_2023\nitems: \"&lt;items&gt;\" // REQUIRED | array | ex. [{item_id: \"test\"}]\n}\n});\n</code></pre>"},{"location":"events/ecommerce/select_promotion/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Max Length creative_name string required The name of the promotional creative. Ignored if set at the item-level. <code>summer_banner2</code> <code>100</code> creative_slot string required The name of the promotional creative slot associated with the event. Ignored if set at the item-level. <code>featured_hero_splash_1</code> <code>100</code> promotion_id string required The ID of the promotion associated with the event. Ignored if set at the item-level. <code>P_12345</code> <code>100</code> promotion_name string required The name of the promotion associated with the event. Ignored if set at the item-level. <code>summer_sale_2023</code> <code>100</code> items array of items required Populate with item objects that represent the product viewed. <code>[{item_id: \"test\"}]</code>"},{"location":"events/ecommerce/view_cart/","title":"View Cart","text":"<p>Fire whenever a user views their cart. This event is not the same as the ecommerce event \"Begin Checkout\". Unlike \"Begin Checkout\", the view_cart event will fire when a user is preparing to finalize their purchase, usually presented with their list of products, as well as options as to how they will proceed with checking out (e.g. normal checkout, paypal, amazon, etc). </p>"},{"location":"events/ecommerce/view_cart/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User views cart\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.\ndataLayer.push({\nevent: \"view_cart\",\necommerce: {\ncurrency: \"&lt;currency&gt;\", // REQUIRED | string | ex. USD | pattern: ^[A-Z]{3}$ | min. 3, max. 3\nitems: \"&lt;items&gt;\", // REQUIRED | array | ex. [{item_id: \"test\"}]\nvalue: \"&lt;value&gt;\" // REQUIRED | number | ex. 7.77 | pattern: ^\\d\\.\\d\\d$ | min. 0.00\n}\n});\n</code></pre>"},{"location":"events/ecommerce/view_cart/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Minimum Length Maximum Length Minimum currency string required Currency of the items associated with the event, in 3-letter ISO 4217 format. <code>USD</code> <code>^[A-Z]{3}$</code> <code>3</code> <code>3</code> items array of items required Populate with item objects that represent the product viewed. <code>[{item_id: \"test\"}]</code> <code>100</code> value number required The monetary value of the event. Does not include currency sign. <code>7.77</code> <code>^\\d\\.\\d\\d$</code> <code>100</code> <code>0.00</code>"},{"location":"events/ecommerce/view_item/","title":"View Item","text":"<p>Fire whenever a user visits a product detail page/screen.</p> <p>This event is to fire when a user is presented with a HIGHLY DETAILED page/screen, which includes (but is not limited to): - A web Page - after clicking \"more details\" on an item and an on-page window opens up and displays a product detail screen overlaying the previous screen</p> <p>If a page/screen is providing the user with detailed information, the user can add a product to their cart, and navigate to their cart with a product added, then it is highly likely that this page/screen is a product detail page/screen</p>"},{"location":"events/ecommerce/view_item/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User visits a product detail page\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.\ndataLayer.push({\nevent: \"view_item\",\necommerce: {\ncurrency: \"&lt;currency&gt;\", // REQUIRED | string | ex. USD | pattern: ^[A-Z]{3}$ | min. 3, max. 3\nitems: \"&lt;items&gt;\", // REQUIRED | array | ex. [{item_id: \"test\"}]\nvalue: \"&lt;value&gt;\" // REQUIRED | number | ex. 7.77 | pattern: ^\\d\\.\\d\\d$ | min. 0.00\n}\n});\n</code></pre>"},{"location":"events/ecommerce/view_item/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Minimum Length Maximum Length Minimum currency string recommended Currency of the items associated with the event, in 3-letter ISO 4217 format. <code>USD</code> <code>^[A-Z]{3}$</code> <code>3</code> <code>3</code> items array of items required Populate with item objects that represent the product viewed. <code>[{item_id: \"test\"}]</code> value number recommended The monetary value of the event. Does not include currency sign. <code>7.77</code> <code>^\\d\\.\\d\\d$</code> <code>100</code> <code>0.00</code>"},{"location":"events/ecommerce/view_item_list/","title":"View Item List","text":"<p>Fire whenever a user sees multiple product links in a list that forward the user to the product detail page. </p> <p>This event should also be fired for the \"Filter By Group\" component when the list is initially displayed, or when a user applies a facet (but only when that component contains one or more products).</p>"},{"location":"events/ecommerce/view_item_list/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User sees multiple product links in a list that forward to a product detail page\n// 'Filter By Group' component list is initially displayed or updated after a facet is applied, but only for products\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.\ndataLayer.push({\nevent: \"view_item_list\",\necommerce: {\nfacets: \"&lt;facets&gt;\", // contextual | string - double delimited (:)(~) | ex. category:skin_health~featured_as:best_seller \nitems: \"&lt;items&gt;\", // REQUIRED | array | ex. [{item_id: \"070501110485\", item_name: \"Neutrogena Hydro Boost Gel-Cream\"}]  \nitem_list_id: \"&lt;item_list_id&gt;\", // REQUIRED | string | ex. 12345abcde12345\nitem_list_name: \"&lt;item_list_name&gt;\", // REQUIRED | string | ex. filter_by_group, recommended_products, recently_viewed_products\nlist_type: \"&lt;list_type&gt;\", // REQUIRED | string | ex. cards, search_results  \nsearch_term: \"&lt;search_term&gt;\", // contextual | string | ex. sunscreen\nsearch_type: \"&lt;search_type&gt;\", // contextual | string | ex. site, filter_by_group\n}\n});\n</code></pre>"},{"location":"events/ecommerce/view_item_list/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Maximum Length facets delimited string contextual A double-delimited string of key/value pairs representing the refinements that were applied if this list is displayed using the \"Filter By Group\" component. <code>category:skin_health\\~skin_concern:acne\\ ~featured_as:best_seller</code> <code>100</code> items array of items required Populate with item objects that represent each product in the list. <code>[{item_id: \"test\"}]</code> item_list_id string required The computer-readable machine name of the list the item showed up in. Use UUID provided by the component if no more specific ID is available. <code>12345abcde12345</code> <code>100</code> item_list_name string required The human-readable name of the list the item showed up in. If one is not available, populate with numerical index of which list this is on the page (1-indexed). For <code>filter_by_group</code> component, use that value. <code>filter_by_group, recommended_products, recently_viewed_products, search_results</code> <code>100</code> list_type string required The type of list the item was found in. <code>cards, search_results</code> <code>100</code> search_term string contextual The final search term submitted after any correction has been performed. Only set if the <code>list_type</code> is <code>search_results</code>. <code>sunscreen</code> <code>100</code> search_type string contextual The type of search performed. Only set if the <code>list_type</code> is <code>search_results</code>. <code>site, filter_by_group</code> <code>100</code>"},{"location":"events/ecommerce/view_promotion/","title":"View Promotion","text":"<p>Fire whenever a user views/sees a promotion located in a component that forwards the user to a promotional page or an item/product. Component types include cards, carousels, search, promotions, home screen hero images, and similar components. A promotion is usually a temporary presentation of information that is different than clicking an item in a dynamic list which would normally send a \"Select Items\".</p> <p>The most common use case of the \"view_promotion\" event user views/sees the hero image that is displayed on the home page of a brand site as this is most commonly a promotion space that will drive a user to a product or product list.</p> <p>Pairs with \"Select Promotion\".</p>"},{"location":"events/ecommerce/view_promotion/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;a href=\"&lt;link_url&gt;\"\ndata-layer-event=\"view_promotion\"\ndata-layer-facets=\"&lt;facets&gt;\"\ndata-layer-list_type=\"&lt;list_type&gt;\"\ndata-layer-search_term=\"&lt;search_term&gt;\"\ndata-layer-search_type=\"&lt;search_type&gt;\"\ndata-layer-index=\"&lt;index&gt;\"\n&gt;\n</code></pre>"},{"location":"events/ecommerce/view_promotion/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User sees a promotion link\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ ecommerce: null });  // Clear the previous ecommerce object.\ndataLayer.push({\nevent: \"view_promotion\",\necommerce: {\ncreative_name: \"&lt;creative_name&gt;\", // REQUIRED | string | ex. summer_banner2 \ncreative_slot: \"&lt;creative_slot&gt;\", // REQUIRED | string | ex. featured_hero_splash_1 \npromotion_id: \"&lt;promotion_id&gt;\", // REQUIRED | string | ex. P_12345\npromotion_name: \"&lt;promotion_name&gt;\", // REQUIRED | string | summer_sale_2023\nitems: \"&lt;items&gt;\" // REQUIRED | array | ex. [{item_id: \"test\"}]\n}\n});\n</code></pre>"},{"location":"events/ecommerce/view_promotion/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Max Length creative_name string required The name of the promotional creative. Ignored if set at the item-level. <code>summer_banner2</code> <code>100</code> creative_slot string required The name of the promotional creative slot associated with the event. Ignored if set at the item-level. <code>featured_hero_splash_1</code> <code>100</code> promotion_id string required The ID of the promotion associated with the event. Ignored if set at the item-level. <code>P_12345</code> <code>100</code> promotion_name string required The name of the promotion associated with the event. Ignored if set at the item-level. <code>summer_sale_2023</code> <code>100</code> items array of items required Populate with item objects that represent the product viewed. <code>[{item_id: \"test\"}]</code>"},{"location":"events/forms/form_complete/","title":"Form Complete","text":"<p>Fire whenever a user successfully completes a form. </p> <p>This event is fired when form input is successfully received and process. This is in contrast to <code>form_error</code> which occurs when a submission is attempted but an error occurs and the form input is not recieved and processed.</p>"},{"location":"events/forms/form_complete/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User successfully completes a form and data is received and processed\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null, user_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'form_complete',\nevent_data: {\nidentifier: '&lt;identifier&gt;', // recommended | string | ex. ecp_locator, free_trial   \nname: '&lt;name&gt;', // REQUIRED | string | ex. ecp_locator, free_trial  \ntype: '&lt;type&gt;' // REQUIRED | string | ex. contact, lead_generation  \n},\nuser_data: {\nuser_id: '&lt;user_id&gt;', // optional | string | ex. 12345\nuser_login_state: '&lt;user_login_state&gt;', // optional | string | ex. authenticated, anonymous \nuser_type: '&lt;user_type&gt;' // optional | string | ex. new, returning\nevent_form_custkey: '&lt;SFMC_CustomerKey&gt;', // REQUIRED | string | ex. 12345...\nevent_form_hashemail: '&lt;HashedEmail&gt;' // REQUIRED | string | ex. b642b4217b34b1e8d3bd915fc65c4452 (MD5)\n}\n});\n</code></pre>"},{"location":"events/forms/form_complete/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string recommended The form machine-readable name. This should be a unique value specific to this form, if one exists. If one does not exist, this can also be populated with the same value as the . ecp_locator, free_trial name string required The form human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the form with. It should be lowercase snake_case. ecp_locator, free_trial type string required The form type. This will act as a filtering mechanism in reporting to enable analysts to view form droppoff funnels. It can also act as an internal aid in firing additional events if necessary. For instance, lead-generating forms require a <code>generate_lead</code> event to be fired alongside <code>form_complete</code>, and that could be written into the logic based upon this field. contact, lead_generation user_id string contextual The id of the user currently logged in to the site, if the site offers authentication and the user is authenticated. 123456 user_login_state string contextual Set on all events with the authentication status of the visitor. authenticated, anonymous user_type string contextual Set on all events with the authentication type of the visitor are they new or returning new, returning event_form_custkey string required This is the ID created by Salesforce Marketing cloud event_form_hashemail string required Converts the submitted email into hased format"},{"location":"events/forms/form_error/","title":"Form Error","text":"<p>Fire whenever a user unsuccessfully completes a form. </p> <p>This is in contrast to <code>form_complete</code> which occurs when a submission succeeds.</p>"},{"location":"events/forms/form_error/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User unsuccessfully completes a form and data is not received or processed\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'form_error',\nevent_data: {\nerror_message: '&lt;error_message&gt;', // REQUIRED | string | ex. Phone number should follow the format (xxx) xxx-xxxx, Must be a valid email address\nidentifier: '&lt;identifier&gt;', // recommended | string | ex. ecp_locator, free_trial   \nname: '&lt;name&gt;', // REQUIRED | string | ex. ecp_locator, free_trial\ntype: '&lt;type&gt;' // recommended | string | ex. form_field_validation, server_error    \n}\n});\n</code></pre>"},{"location":"events/forms/form_error/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of error_message string required The specific error that occurred. If an error message is shown to the user, this should be populated with that text. Phone number should follow the format (xxx) xxx-xxxx, Must be a valid email address identifier string recommended The form machine-readable name. This should be a unique value specific to this form, if one exists. If one does not exist, this can also be populated with the same value as the . ecp_locator, free_trial name string required The form human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the form with. It should be lowercase snake_case. ecp_locator, free_trial type string recommended The type of error that occurred. form_field_validation, server_error"},{"location":"events/forms/form_file_upload/","title":"Form Complete","text":"<p>Fire whenever a user successfully uploads a file (such as a receipt) within a form.</p>"},{"location":"events/forms/form_file_upload/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User successfully uploads a file (like a receipt) within a form.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null, user_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'form_file_upload',\nevent_data: {\nidentifier: '&lt;identifier&gt;', // recommended | string | ex. ecp_locator, free_trial   \nname: '&lt;name&gt;', // REQUIRED | string | ex. ecp_locator, free_trial  \ntype: '&lt;type&gt;', // REQUIRED | string | ex. contact, lead_generation\nfile_extension: '&lt;file_extension&gt;', // recommended | string | ex. pdf\nfile_name: '&lt;file_name&gt;' // recommended | string | ex. example.pdf\n}\n});\n</code></pre>"},{"location":"events/forms/form_file_upload/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string recommended The form machine-readable name. This should be a unique value specific to this form, if one exists. If one does not exist, this can also be populated with the same value as the . ecp_locator, free_trial name string required The form human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the form with. It should be lowercase snake_case. ecp_locator, free_trial type string required The form type. This will act as a filtering mechanism in reporting to enable analysts to view form droppoff funnels. It can also act as an internal aid in firing additional events if necessary. For instance, lead-generating forms require a <code>generate_lead</code> event to be fired alongside <code>form_complete</code>, and that could be written into the logic based upon this field. contact, lead_generation file_extension string recommended The file extension of the file being uploaded. pdf file_name string recommended The filename of the file being uploaded. drug_facts.pdf"},{"location":"events/forms/form_start/","title":"Form Start","text":"<p>Fire whenever a user starts filling out a form. </p> <p>This event is generally fired after user input in the first form field. Historically this has been done via an HTMLElement change event on a form field, though it could be done via an HTMLElement focus event on a form field instead if that proves easier to implement. It should only be fired once per form, but if that is too technically complicated to implement, it can be limited on the GTM side instead.</p>"},{"location":"events/forms/form_start/#html-data-attributes","title":"HTML Data Attributes","text":"<p>This could be done with data attributes and detected via GTM at DOM Ready, but if a form is dynamically added to the page at any time, it would not have the listeners properly set up. As such, manually firing the data layer push whenever a form is submitted is a more reliable approach.</p>"},{"location":"events/forms/form_start/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User starts to fill our a form. Event fires after user input into the first form field \n// and should only fire once. onchange(), onfocus(), and GTM may be helpful.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'form_start',\nevent_data: {\nidentifier: '&lt;identifier&gt;', // recommended | string | ex. ecp_locator, free_trial   \nname: '&lt;name&gt;', // REQUIRED | string | ex. ecp_locator, free_trial  \ntype: '&lt;type&gt;' // REQUIRED | string | ex. contact, lead_generation  \n}\n});\n</code></pre>"},{"location":"events/forms/form_start/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string recommended The form machine-readable name. This should be a unique value specific to this form, if one exists. If one does not exist, this can also be populated with the same value as the <code>name</code>. ecp_locator, free_trial name string required The form human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the form with. It should be lowercase snake_case. ecp_locator, free_trial type string required The form type. This will act as a filtering mechanism in reporting to enable analysts to view form droppoff funnels. It can also act as an internal aid in firing additional events if necessary. For instance, lead-generating forms require a <code>generate_lead</code> event to be fired alongside <code>form_complete</code>, and that could be written into the logic based upon this field. contact, lead_generation"},{"location":"events/forms/form_view/","title":"Form View","text":"<p>Fire whenever a user is presented with a form on a page.</p>"},{"location":"events/forms/form_view/#html-data-attributes","title":"HTML Data Attributes","text":"<p>This could be done with data attributes and detected via GTM at DOM Ready, but if a form is dynamically added to the page at any time, it would not be picked up. As such, manually firing the data layer push whenever a form is loaded is a more reliable approach. Note only fire the dataLayer event when the form is viable to the user. - example footer forms.</p>"},{"location":"events/forms/form_view/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User presented a form on a page\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'form_view',\nevent_data: {\nidentifier: '&lt;identifier&gt;', // recommended | string | ex. ecp_locator, free_trial\nname: '&lt;name&gt;', // REQUIRED | string | ex. ecp_locator, free_trial  \ntype: '&lt;type&gt;' // REQUIRED | string | ex. contact, lead_generation\n}\n});\n</code></pre>"},{"location":"events/forms/form_view/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string recommended The form machine-readable name. This should be a unique value specific to this form, if one exists. If one does not exist, this can also be populated with the same value as the . ecp_locator, free_trial name string required The form human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the form with. It should be lowercase snake_case. ecp_locator, free_trial type string required The form type. This will act as a filtering mechanism in reporting to enable analysts to view form droppoff funnels. It can also act as an internal aid in firing additional events if necessary. For instance, lead-generating forms require a <code>generate_lead</code> event to be fired alongside <code>form_complete</code>, and that could be written into the logic based upon this field. contact, lead_generation"},{"location":"events/pharma/select_indication/","title":"Select Indication","text":"<p>Fire whenever a user selects a drug indication or specialty.</p>"},{"location":"events/pharma/select_indication/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User user selects a drug indicatino or specialy\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'select_indication',\nevent_data: {\nindication: '&lt;indication&gt;', // recommended | string | ex. dermatology, rheumatology \n}\n});\n</code></pre>"},{"location":"events/pharma/select_indication/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of indication string recommended The indication or specialty selected by the user dermatology, rheumatology"},{"location":"events/reviews/review_complete/","title":"Review Complete","text":"<p>Fire whenever a user completes a review. </p> <p>An item object should be included, but not as a separate property or array. The keys and values of the item should be rolled into the base object being pushed...hence the spread operator syntax used in the JS code below.</p>"},{"location":"events/reviews/review_complete/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User completes a review\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'review_complete',\nevent_data: {\nrating: \"&lt;rating&gt;\", // REQUIRED | string | ex. 12345\nitem_id: \"&lt;item_id&gt;\" // recommended | string | ex. 3\n}\n});\n</code></pre>"},{"location":"events/reviews/review_complete/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of item_id string required The ID of the product being reviewed. 12345 rating string recommended The numerical rating given to the product. 3"},{"location":"events/reviews/review_start/","title":"Review Start","text":"<p>Fire whenever a user modifies the first field on a review widget. </p> <p>An item object should be included, but not as a separate property or array. The keys and values of the item should be rolled into the base object being pushed...hence the spread operator syntax used in the JS code below.</p>"},{"location":"events/reviews/review_start/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User modifies the first field on a review widget\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'review_start',\nevent_data: {\nitem_id: \"&lt;item_id&gt;\" // REQUIRED | string | ex. 12345\n}\n});\n</code></pre>"},{"location":"events/reviews/review_start/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of item_id string required The ID of the product being reviewed. 12345"},{"location":"events/search/filter_item_category/","title":"Filter Item Category","text":"<p>Note This event has been deprecated in favor of view_search_results or view_item_list.</p> <p>Fire whenever a user clicks on a Product Category filter.</p>"},{"location":"events/search/filter_item_category/#javascript-code","title":"Javascript Code","text":"<pre><code>window.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous ecommerce object.\ndataLayer.push({\nevent: \"filter_item_category\",\nevent_data: {\nidentifier: \"&lt;identifier&gt;\",\nname: \"&lt;name&gt;\",\ntype: \"&lt;type&gt;\"\n}\n});\n</code></pre>"},{"location":"events/search/filter_item_category/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of <code>identifier</code> string recommended The filter machine-readable name. This should be a unique value specific to this filter, if one exists. If one does not exist, this can also be populated with the same value as the name. <code>hand_lotions</code>, <code>beauty_creams</code> <code>name</code> string required The filter human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the filter with. It should be lowercase snake_case. <code>\"Hand Lotions\"</code>, <code>\"Beauty Creams\"</code> <code>type</code> string required The filter type. This will act as a filtering mechanism in reporting to enable analysts to view filter engagement."},{"location":"events/search/search/","title":"Search","text":"<p>Fire whenever a user performs a search of any kind. This includes product searches, content searches, resource searches, etc. and does not require a view_search_results event to be fired subsequent to it.</p>"},{"location":"events/search/search/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User performs a search of any kind and does not require a vew_search_results event to be fired, subsequently.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"search\",\nevent_data: {\ncorrected_term: \"&lt;search_term_corrected&gt;\", // recommended | string | ex. suns\nsearch_term: \"&lt;search_term&gt;\", // REQUIRED | string | ex. sunscreen\nsearch_type: \"&lt;search_type&gt;\", // REQUIRED | string | ex ecp_locator,product,site    \n}\n});\n</code></pre>"},{"location":"events/search/search/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of search_term_corrected string recommended The initial search term before typeahead/lookahead/suggestion, if the site has those features. suns search_term string required The final search term submitted after any correction has been performed sunscreen search_type string required The type of search performed ecp_locator,product,site"},{"location":"events/search/select_search_result/","title":"Select Search Result","text":"<p>This event has been rolled into the select_content, select_item, and select_promotion events.</p>"},{"location":"events/search/view_search_results/","title":"View Search Results","text":"<p>Fire whenever a user views search results. This includes product searches, content searches, resource searches, etc. and does not require a search event to be fired prior to it.</p> <p>This event should also be considered for the \"Filter By Group\" component if it is ever used to display anything but products. When used in this way, the search_term parameter would be <code>filter_by_group</code> as that component does not currently allow for a search_term to be entered by the user. If this case does arise, contact Search Discovery for additional information.</p>"},{"location":"events/search/view_search_results/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User views search results and does not require a search event to be fired previously\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"view_search_results\",\nevent_data: {\nfacets: \"&lt;refinements&gt;\", // recommended | string - double delimited (:)(~) | ex. category:skin_health~featured_as:best_seller   \nnumber_of_items: \"&lt;number_of_items&gt;\", // recommended | integer | ex. 324\nsearch_term: \"&lt;search_term&gt;\", // REQUIRED | string | ex. sunscreen\nsearch_type: \"&lt;search_type&gt;\", // REQUIRED | string | ex. ecp_locator, filter_by_group,product, site \n}\n});\n</code></pre>"},{"location":"events/search/view_search_results/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of <code>facets</code> delimited string recommended A delimited string of key/value pairs representing the facets that were applied to this search <code>need:skin health~skin_concern:acne~featured_as:best_seller</code> <code>number_of_items</code> integer recommended The total number of search results found <code>324</code> <code>search_term</code> string required The final search term submitted after any correction has been performed <code>sunscreen</code> <code>search_type</code> string required The type of search performed <code>ecp_locator</code>,<code>filter_by_group</code>,<code>product</code>,<code>site</code>"},{"location":"events/skin360/skin360_score_view/","title":"Skin360 Score View","text":"<p>Fire whenever a user views their skin scores</p>"},{"location":"events/skin360/skin360_score_view/#javascript-code","title":"Javascript Code","text":"<pre><code>window.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'skin360_score_view',\nevent_data: {\nskin360_overall_score: '&lt;identifier&gt;',\nskin360_clearer_score: '&lt;skin360_clearer_score&gt;',\nskin360_wrinkles_score: '&lt;skin360_wrinkles_score&gt;',\nskin360_fine_lines_score: '&lt;skin360_fine_lines_score&gt;',\nskin360_smoothness_score: '&lt;skin360_smoothness_score&gt;',\nskin360_dark_circles_score: '&lt;skin360_dark_circles_score&gt;',\nskin360_dark_spots_score: '&lt;skin360_dark_spots_score&gt;',\n}\n});\n</code></pre>"},{"location":"events/skin360/skin360_score_view/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of skin360_{{scoreName}}_score string required The skin score generated by the skin360 app. 9.6,7.3"},{"location":"events/subscriptions/subscribe/","title":"Subscribe","text":"<p>Fire whenever a user subscribes to an email or product.</p>"},{"location":"events/subscriptions/subscribe/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User subscribes to an email or product\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'subscribe',\nevent_data: {\nidentifier: '&lt;identifier&gt;', // recommended | string | ex. neutrogena_newsletter_123, jnj_promos_123\nname: '&lt;name&gt;', // REQUIRED | string | ex. neutrogena_newsletter, jnj_promos\ntype: '&lt;type&gt;', // REQUIRED | string | ex. newsletter, promos\nmethod: '&lt;method&gt;' // recommended | string | ex. email\n}\n});\n</code></pre>"},{"location":"events/subscriptions/subscribe/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string recommended The subscription machine-readable name. This should be a unique value specific to this subscription, if one exists. If one does not exist, this can also be populated with the same value as the <code>name</code>. neutrogena_newsletter_123, jnj_promos_123 name string required The subscription human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the subscription with. It should be lowercase snake_case. neutrogena_newsletter, jnj_promos type string required The subscription type. This will act as a filtering mechanism in reporting to enable analysts to view subscription droppoff funnels. It can also act as an internal aid in firing additional events if necessary. For instance, lead-generating subscriptions require a <code>generate_lead</code> event to be fired alongside <code>form_complete</code>, and that could be written into the logic based upon this field. newsletter, promos method string recommended The channel through which the subscription is delivered. This is usually email, but can also be product. email"},{"location":"events/subscriptions/subscription_change/","title":"Subscription Change","text":"<p>Fire whenever a user changes their subscription (other than a subscribe or unsubscribe event).</p>"},{"location":"events/subscriptions/subscription_change/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User changes their subscription (other than a subscribe or unsubscribe event)\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'subscription_change',\nevent_data: {\nidentifier: '&lt;identifier&gt;', // recommended | string | ex. neutrogena_newsletter_123, jnj_promos_123\nname: '&lt;name&gt;', // REQUIRED | string | ex. neutrogena_newsletter, jnj_promos\ntype: '&lt;type&gt;', // REQUIRED | string | ex. newsletter, promos\nmethod: '&lt;method&gt;' // recommended | string | ex. email\n}\n});\n</code></pre>"},{"location":"events/subscriptions/subscription_change/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string recommended The subscription machine-readable name. This should be a unique value specific to this subscription, if one exists. If one does not exist, this can also be populated with the same value as the <code>name</code>. neutrogena_newsletter_123, jnj_promos_123 name string required The subscription human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the subscription with. It should be lowercase snake_case. neutrogena_newsletter, jnj_promos type string required The subscription type. This will act as a filtering mechanism in reporting to enable analysts to view subscription droppoff funnels. It can also act as an internal aid in firing additional events if necessary. For instance, lead-generating subscriptions require a <code>generate_lead</code> event to be fired alongside <code>form_complete</code>, and that could be written into the logic based upon this field. newsletter, promos method string recommended The flow through which the subscription changed occured."},{"location":"events/subscriptions/unsubscribe/","title":"Unsubscribe","text":"<p>Fire whenever a user unsubscribes from an email or product.</p>"},{"location":"events/subscriptions/unsubscribe/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User unsubscribes to an email or product\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'unsubscribe',\nevent_data: {\nidentifier: '&lt;identifier&gt;', // recommended | string | ex. neutrogena_newsletter_123, jnj_promos_123\nname: '&lt;name&gt;', // REQUIRED | string | ex. neutrogena_newsletter, jnj_promos\ntype: '&lt;type&gt;', // REQUIRED | string | ex. newsletter, promos\nmethod: '&lt;method&gt;' // recommended | string | ex. email\n}\n});\n</code></pre>"},{"location":"events/subscriptions/unsubscribe/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string recommended The subscription machine-readable name. This should be a unique value specific to this subscription, if one exists. If one does not exist, this can also be populated with the same value as the <code>name</code>. neutrogena_newsletter_123, jnj_promos_123 name string required The subscription human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the subscription with. It should be lowercase snake_case. neutrogena_newsletter, jnj_promos type string required The subscription type. This will act as a filtering mechanism in reporting to enable analysts to view subscription droppoff funnels. It can also act as an internal aid in firing additional events if necessary. For instance, lead-generating subscriptions require a <code>generate_lead</code> event to be fired alongside <code>form_complete</code>, and that could be written into the logic based upon this field. newsletter, promos method string recommended The channel through which the subscription was delivered. This is usually email, but can also be product. email"},{"location":"events/survey/survey_complete/","title":"Survey Complete","text":"<p>Fire whenever a user successfully completes a survey. </p> <p>This event is fired when survey input is successfully received and process. This is in contrast to <code>survey_error</code> which occurs when a submission is attempted but an error occurs and the survey input is not recieved and processed.</p>"},{"location":"events/survey/survey_complete/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User successfully completes survey and survey input is sucessfully received and processed. Contrasts survey_error in which a submission is not recieved and processed. \n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'survey_complete',\nevent_data: {\nidentifier: '&lt;identifier&gt;', // recommended | string | ex. cancel_subscription_flow, free_trial\nname: '&lt;name&gt;', // REQUIRED | string | ex. cancel_subscription_flow, free_trial\ntype: '&lt;type&gt;' // REQUIRED | string | ex. survey, lead_generation\n}\n});\n</code></pre>"},{"location":"events/survey/survey_complete/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string recommended The survey machine-readable name. This should be a unique value specific to this survey, if one exists. If one does not exist, this can also be populated with the same value as the <code>name</code>. cancel_subscription_flow, free_trial name string required The survey human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the survey with. It should be lowercase snake_case. cancel_subscription_flow, free_trial type string required The survey type. This will act as a filtering mechanism in reporting to enable analysts to view survey droppoff funnels. It can also act as an internal aid in firing additional events if necessary. For instance, lead-generating surveys require a <code>generate_lead</code> event to be fired alongside <code>complete_survey</code>, and that could be written into the logic based upon this field. survey, lead_generation"},{"location":"events/survey/survey_error/","title":"Survey Error","text":"<p>Fire whenever a user unsuccessfully completes a survey. </p> <p>This is in contrast to <code>complete_survey</code> which occurs when a submission succeeds.</p>"},{"location":"events/survey/survey_error/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User unsuccessfully completes a survey and survey input is not successfully received and processed. Contrasts survey_complete in which a submission is received and processed successfully. \n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'survey_error',\nevent_data: {\nerror_message: '&lt;error_message&gt;', // REQUIRED | string | ex. Phone number should follow the format (xxx) xxx-xxxx, Must be a valid email address\nidentifier: '&lt;identifier&gt;', // recommended | string | ex. cancel_subscription_flow, free_trial\nname: '&lt;name&gt;', // REQUIRED | string | ex. cancel_subscription_flow, free_trial\ntype: '&lt;type&gt;', // REQUIRED | string | ex. survey, lead_generation\n}\n});\n</code></pre>"},{"location":"events/survey/survey_error/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of error_message string required The specific error that occurred. If an error message is shown to the user, this should be populated with that text. Phone number should follow the format (xxx) xxx-xxxx, Must be a valid email address identifier string recommended The survey machine-readable name. This should be a unique value specific to this survey, if one exists. If one does not exist, this can also be populated with the same value as the <code>name</code>. cancel_subscription_flow, free_trial name string required The survey human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the survey with. It should be lowercase snake_case. cancel_subscription_flow, free_trial type string recommended The type of error that occurred. survey_field_validation, server_error step_name string recommended The human-readable name of the current step of the survey. why_are_you_cancelling,which_product step_number integer recommended The current step/section integer of the survey flow. 1,2,3,4,5"},{"location":"events/survey/survey_start/","title":"Survey Start","text":"<p>Fire whenever a user starts filling out a survey. </p> <p>This event is generally fired after user input in the first survey field. Historically this has been done via an HTMLElement change event on a survey field, though it could be done via an HTMLElement focus event on a survey field instead if that proves easier to implement. It should only be fired once per survey, but if that is too technically complicated to implement, it can be limited on the GTM side instead.</p>"},{"location":"events/survey/survey_start/#html-data-attributes","title":"HTML Data Attributes","text":"<p>This could be done with data attributes and detected via GTM at DOM Ready, but if a survey is dynamically added to the page at any time, it would not have the listeners properly set up. As such, manually firing the data layer push whenever a survey is submitted is a more reliable approach.</p>"},{"location":"events/survey/survey_start/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User starts to fill our a survey. Event fires after user input into the first form field \n// and should only fire once. onchange(), onfocus(), and GTM may be helpful.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'survey_start',\nevent_data: {\nidentifier: '&lt;identifier&gt;', // recommended | string | ex. cancel_subscription_flow, free_trial\nname: '&lt;name&gt;', // REQUIRED | string | ex. cancel_subscription_flow, free_trial\ntype: '&lt;type&gt;' // REQUIRED | string | ex. survey, lead_generation\n}\n});\n</code></pre>"},{"location":"events/survey/survey_start/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string recommended The survey machine-readable name. This should be a unique value specific to this survey, if one exists. If one does not exist, this can also be populated with the same value as the <code>name</code>. cancel_subscription_flow, free_trial name string required The survey human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the survey with. It should be lowercase snake_case. cancel_subscription_flow, free_trial type string required The survey type. This will act as a filtering mechanism in reporting to enable analysts to view survey droppoff funnels. It can also act as an internal aid in firing additional events if necessary. For instance, lead-generating surveys require a <code>generate_lead</code> event to be fired alongside <code>complete_survey</code>, and that could be written into the logic based upon this field. survey, lead_generation"},{"location":"events/survey/survey_step_complete/","title":"Survey Step Complete","text":"<p>Fire whenever a user successfully completes a survey step/section. </p> <p>This event is fired when a step/section of a survey is successfully received and processed. This is in contrast to <code>survey_error</code> which occurs when a submission is attempted but an error occurs and the survey input is not received and processed.</p> <p>It is important to note that the <code>step_choice</code> attribute which can possibly include PII (e.g. freeform input fields, first name, last name, email address, home address, etc.) should be EXCLUDED from this data layer event. For more information, please visit Understanding PII in Google's contracts and policies.</p>"},{"location":"events/survey/survey_step_complete/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User successfully completes a survey step/section\n// NOTE: step_choice attribute may contain PII data and should be excluded from this event where applicable\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'survey_step_complete',\nevent_data: {\nidentifier: '&lt;identifier&gt;', // recommended | string | ex. cancel_subscription_flow, free_trial\nname: '&lt;name&gt;', // REQUIRED | string | ex. cancel_subscription_flow, free_trial\ntype: '&lt;type&gt;', // REQUIRED | string | ex. survey, lead_generation\nstep_choice: '&lt;step_choice&gt;', // recommended | string | Radio buttons or select lists only | ex. Too Expensive,Using Another Product/Brand\nstep_choice_method: '&lt;step_choice_method&gt;', // recommended | string | ex. automatic, user-selected\nstep_name: '&lt;step_name&gt;', // recommended | string | ex. why_are_you_cancelling, which_product\nstep_number: '&lt;step_number&gt;' // recommended | integer | ex. 1, 2, 3\n}\n});\n</code></pre>"},{"location":"events/survey/survey_step_complete/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string recommended The survey machine-readable name. This should be a unique value specific to this survey, if one exists. If one does not exist, this can also be populated with the same value as the <code>name</code>. cancel_subscription_flow, free_trial name string required The survey human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the survey with. It should be lowercase snake_case. cancel_subscription_flow, free_trial type string required The survey type. This will act as a filtering mechanism in reporting to enable analysts to view survey droppoff funnels. It can also act as an internal aid in firing additional events if necessary. For instance, lead-generating surveys require a <code>generate_lead</code> event to be fired alongside <code>complete_survey</code>, and that could be written into the logic based upon this field. survey, lead_generation step_choice string recommended The human-readable, user-selected value(s) within a step/section of a survey. Too Expensive,Using Another Product/Brand step_choice_method string recommended This was initially scoped for skin360 as the survey can assign you a primary skin concern or you can choose one yourself. It can be used beyond that application for any time you need additional context around the step choice. automatic,user-selected step_name string recommended The human-readable name of the current step of the survey. why_are_you_cancelling,which_product step_number integer recommended The current step/section integer of the survey flow. 1,2,3,4,5"},{"location":"events/survey/survey_view/","title":"Survey View","text":"<p>Fire whenever a user is presented with a survey on a page.</p>"},{"location":"events/survey/survey_view/#html-data-attributes","title":"HTML Data Attributes","text":"<p>This could be done with data attributes and detected via GTM at DOM Ready, but if a survey is dynamically added to the page at any time, it would not be picked up. As such, manually firing the data layer push whenever a survey is loaded is a more reliable approach.</p>"},{"location":"events/survey/survey_view/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User presented with survey on a page\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'survey_view',\nevent_data: {\nidentifier: '&lt;identifier&gt;', // recommended | string | ex. cancel_subscription_flow, free_trial\nname: '&lt;name&gt;', // REQUIRED | string | ex. cancel_subscription_flow, free_trial\ntype: '&lt;type&gt;' // REQUIRED | string | ex. survey, lead_generation\n}\n});\n</code></pre>"},{"location":"events/survey/survey_view/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string recommended The survey machine-readable name. This should be a unique value specific to this survey, if one exists. If one does not exist, this can also be populated with the same value as the <code>name</code>. cancel_subscription_flow, free_trial name string required The survey human-readable name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the survey with. It should be lowercase snake_case. cancel_subscription_flow, free_trial type string required The survey type. This will act as a filtering mechanism in reporting to enable analysts to view survey droppoff funnels. It can also act as an internal aid in firing additional events if necessary. For instance, lead-generating surveys require a <code>generate_lead</code> event to be fired alongside <code>complete_survey</code>, and that could be written into the logic based upon this field. survey, lead_generation"},{"location":"events/tabs/select_tab/","title":"Select Tab","text":"<p>Fire whenever a user selects a an item out of a tabset that asynchronously updates the page. Do not use this for navigation menus as those should be covered by menu data attributes.</p>"},{"location":"events/tabs/select_tab/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;a href=\"&lt;link_url&gt;\"\ndata-layer-event=\"select_tab\"\ndata-layer-identifier=\"&lt;identifier&gt;\"\ndata-layer-name=\"&lt;name&gt;\"\ndata-layer-heading=\"&lt;heading&gt;\"\ndata-layer-index=\"&lt;index&gt;\"\n&gt;\n</code></pre>"},{"location":"events/tabs/select_tab/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User selects an item in a tabset that asynchronously updates page. Not for navigation menu use.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"select_tab\",\nevent_data: {\nidentifier: \"&lt;identifier&gt;\", // REQUIRED | string | ex. 12345abcde12345\nname: \"&lt;name&gt;\", // recommended | string | ex. FAQs, 2\nheading: \"&lt;heading&gt;\", // REQUIRED | string | ex. Are our products safe?\nindex: \"&lt;index&gt;\", // recommended | integer | ex 1, 5\n}\n});\n</code></pre>"},{"location":"events/tabs/select_tab/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of identifier string required The computer-readable machine name of the tab. Use UUID provided by the component 12345abcde12345 name string recommended The human-readable name of the tab. If user does not input one, populate with numerical index of which tab this is on the page (1-indexed). FAQs are the big one that currently need to be broken out in reporting, so getting a name for those should be the priority. FAQs, 2 heading string required The text heading of the tab item that was opened/closed \"Are our products safe?\" index integer recommended The ordinal slot number of the tab item. E.g. - the top item in the tab will be slot 1. (1-indexed) 1 1 1"},{"location":"events/video/video_complete/","title":"Video Progress","text":"<p>Fire whenever a video ends. This will usually be picked up automatically by GTM on desktop but may need to be manually sent on mobile.</p>"},{"location":"events/video/video_complete/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// Video ends, useful for mobile videos\n// Code\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'video_complete',\nevent_data: {\nvideo_current_time: '&lt;video_current_time&gt;', // REQUIRED | string | ex. 15\nvideo_duration: '&lt;video_duration&gt;', // REQUIRED | string | ex. 600\nvideo_percent: '&lt;video_percent&gt;', // REQUIRED | string | ex. 15\nvideo_provider: '&lt;video_provider&gt;', // REQUIRED | string | ex. youtube, vimeo\nvideo_title: '&lt;video_title&gt;', // REQUIRED | string | ex. My Video\nvideo_url: '&lt;video_url&gt;', // REQUIRED | string | https://youtu.be/12345ABC\nvisible: '&lt;visible&gt;', // REQUIRED | boolean | ex. true\n}\n});\n</code></pre>"},{"location":"events/video/video_complete/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of video_current_time string required The current time of the video viewed. 15 video_duration string required The total duration of the video. 600 video_percent string required The current percent of the video viewed. 15 video_provider string required The video provider. youtube, vimeo video_title string required The title of the video. Walkthrough of the Google Analytics 4 User Interface video_url string required The URL of the video. https://youtu.be/RhS85WQiBLU visible boolean required Is the video visible on the page. true"},{"location":"events/video/video_progress/","title":"Video Progress","text":"<p>Fire whenever a video progresses past 10%, 25%, 50%, and 75% duration time. This will usually be picked up automatically by GTM on desktop but may need to be manually sent on mobile.</p>"},{"location":"events/video/video_progress/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// Video progresses past 10%, 25%, 50%, 75% duration time, useful for mobile\n// Code\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'video_start',\nevent_data: {\nvideo_current_time: '&lt;video_current_time&gt;', // REQUIRED | string | ex. 15\nvideo_duration: '&lt;video_duration&gt;', // REQUIRED | string | ex. 600\nvideo_percent: '&lt;video_percent&gt;', // REQUIRED | string | ex. 15\nvideo_provider: '&lt;video_provider&gt;', // REQUIRED | string | ex. youtube, vimeo\nvideo_title: '&lt;video_title&gt;', // REQUIRED | string | ex. My Video\nvideo_url: '&lt;video_url&gt;', // REQUIRED | string | https://youtu.be/12345ABC\nvisible: '&lt;visible&gt;', // REQUIRED | boolean | ex. true\n}\n});\n</code></pre>"},{"location":"events/video/video_progress/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of video_current_time string required The current time of the video viewed. 15 video_duration string required The total duration of the video. 600 video_percent string required The current percent of the video viewed. 15 video_provider string required The video provider. youtube, vimeo video_title string required The title of the video. Walkthrough of the Google Analytics 4 User Interface video_url string required The URL of the video. https://youtu.be/RhS85WQiBLU visible boolean required Is the video visible on the page. true"},{"location":"events/video/video_start/","title":"Video Start","text":"<p>Fire whenever a user starts a video. This will usually be picked up automatically by GTM on desktop but may need to be manually sent on mobile.</p>"},{"location":"events/video/video_start/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// Video starts, useful for mobile\n// Code\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'video_start',\nevent_data: {\nvideo_current_time: '&lt;video_current_time&gt;', // REQUIRED | string | ex. 15\nvideo_duration: '&lt;video_duration&gt;', // REQUIRED | string | ex. 600\nvideo_percent: '&lt;video_percent&gt;', // REQUIRED | string | ex. 15\nvideo_provider: '&lt;video_provider&gt;', // REQUIRED | string | ex. youtube, vimeo\nvideo_title: '&lt;video_title&gt;', // REQUIRED | string | ex. My Video\nvideo_url: '&lt;video_url&gt;', // REQUIRED | string | https://youtu.be/12345ABC\nvisible: '&lt;visible&gt;', // REQUIRED | boolean | ex. true\n}\n});\n</code></pre>"},{"location":"events/video/video_start/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of video_current_time string required The current time of the video viewed. 15 video_duration string required The total duration of the video. 600 video_percent string required The current percent of the video viewed. 15 video_provider string required The video provider. youtube, vimeo video_title string required The title of the video. Walkthrough of the Google Analytics 4 User Interface video_url string required The URL of the video. https://youtu.be/RhS85WQiBLU visible boolean required Is the video visible on the page. true"},{"location":"events/video%20stream/video_livestream_compelete/","title":"Video Livestream Complete","text":"<p>Fire whenever a user completes a live stream video. </p>"},{"location":"events/video%20stream/video_livestream_compelete/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// Video starts, useful for mobile\n// Code\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'video_livestream_complete',\nevent_data: {\nvideo_current_time: '&lt;video_current_time&gt;', // REQUIRED | string | ex. 15\nvideo_duration: '&lt;video_duration&gt;', // REQUIRED | string | ex. 600\nvideo_percent: '&lt;video_percent&gt;', // REQUIRED | string | ex. 15\nvideo_provider: '&lt;video_provider&gt;', // REQUIRED | string | ex. youtube, vimeo, firework, twitch\nvideo_title: '&lt;video_title&gt;', // REQUIRED | string | ex. My Video\nvideo_url: '&lt;video_url&gt;', // REQUIRED | string | https://youtu.be/12345ABC\nvisible: '&lt;visible&gt;', // REQUIRED | boolean | ex. true\n}\n});\n</code></pre>"},{"location":"events/video%20stream/video_livestream_compelete/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of video_current_time string required The current time of the video viewed. 15 video_duration string required The total duration of the video. 600 video_percent string required The current percent of the video viewed. 15 video_provider string required The video provider. youtube, vimeo, firework, twitch video_title string required The title of the video. video_url string required The URL of the video. https://youtu.be/RhS85WQiBLU visible boolean required Is the video visible on the page. true"},{"location":"events/video%20stream/video_livestream_exit/","title":"Video Livestream Exit","text":"<p>Fire whenever a user exits a live stream video.</p>"},{"location":"events/video%20stream/video_livestream_exit/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// Video starts, useful for mobile\n// Code\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'video_livestream_exit',\nevent_data: {\nvideo_current_time: '&lt;video_current_time&gt;', // REQUIRED | string | ex. 15\nvideo_duration: '&lt;video_duration&gt;', // REQUIRED | string | ex. 600\nvideo_percent: '&lt;video_percent&gt;', // REQUIRED | string | ex. 15\nvideo_provider: '&lt;video_provider&gt;', // REQUIRED | string | ex. youtube, vimeo, firework, twitch\nvideo_title: '&lt;video_title&gt;', // REQUIRED | string | ex. My Video\nvideo_url: '&lt;video_url&gt;', // REQUIRED | string | https://youtu.be/12345ABC\nvisible: '&lt;visible&gt;', // REQUIRED | boolean | ex. true\n}\n});\n</code></pre>"},{"location":"events/video%20stream/video_livestream_exit/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of video_current_time string required The current time of the video viewed. 15 video_duration string required The total duration of the video. 600 video_percent string required The current percent of the video viewed. 15 video_provider string required The video provider. youtube, vimeo, firework, twitch video_title string required The title of the video. video_url string required The URL of the video. https://youtu.be/RhS85WQiBLU visible boolean required Is the video visible on the page. true"},{"location":"events/video%20stream/video_livestream_start/","title":"Video Livestream Start","text":"<p>Fire whenever a user starts a live stream video. This will usually be picked up automatically by GTM on desktop but may need to be manually sent on mobile.</p>"},{"location":"events/video%20stream/video_livestream_start/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// Video starts, useful for mobile\n// Code\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: 'video_livestream_start',\nevent_data: {\nvideo_current_time: '&lt;video_current_time&gt;', // REQUIRED | string | ex. 15\nvideo_duration: '&lt;video_duration&gt;', // REQUIRED | string | ex. 600\nvideo_percent: '&lt;video_percent&gt;', // REQUIRED | string | ex. 15\nvideo_provider: '&lt;video_provider&gt;', // REQUIRED | string | ex. youtube, vimeo, firework, twitch\nvideo_title: '&lt;video_title&gt;', // REQUIRED | string | ex. My Video\nvideo_url: '&lt;video_url&gt;', // REQUIRED | string | https://youtu.be/12345ABC\nvisible: '&lt;visible&gt;', // REQUIRED | boolean | ex. true\n}\n});\n</code></pre>"},{"location":"events/video%20stream/video_livestream_start/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of video_current_time string required The current time of the video viewed. 15 video_duration string required The total duration of the video. 600 video_percent string required The current percent of the video viewed. 15 video_provider string required The video provider. youtube, vimeo, firework, twitch video_title string required The title of the video. Walkthrough of the Google Analytics 4 User Interface video_url string required The URL of the video. https://youtu.be/RhS85WQiBLU visible boolean required Is the video visible on the page. true"},{"location":"events/where-to-buy/call_store_wtb/","title":"Call Store WTB","text":"<p>Fire whenever a user successfully calls a store.</p>"},{"location":"events/where-to-buy/call_store_wtb/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User successfully calls a store.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null, user_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"call_store_wtb\",\nevent_data: {\naffiliation: \"&lt;affiliation&gt;\", // REQUIRED | string | ex. walmart, cvs\ncomponent_type: \"&lt;component_type&gt;\", // REQUIRED | string | ex. pricespider, channeladvisor\nitem_brand: \"&lt;item_brand&gt;\", // REQUIRED | string | ex. tylenol, zyrtec, listerine\nitem_id: \"&lt;item_id&gt;\", // REQUIRED | string | ex. CW21001\nitem_name: \"&lt;item_name&gt;\", // REQUIRED | string | ex. essential_foaming_cleanser \nitem_upc: \"&lt;item_upc&gt;\", // **Unknown** | string | ex. 012345678905 (12 digits)\nlink_url: \"&lt;link_url&gt;\" // REQUIRED | string | ex. https://www.example.com/?q=product#id\n}\n});\n</code></pre>"},{"location":"events/where-to-buy/call_store_wtb/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of affiliation string required This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify. It should be lowercase snake_case <code>walmart</code>, <code>cvs</code> component_type string required The human-readable name of the WTB Provider. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify. It should be lowercase snake_case. <code>pricespider</code>, <code>channeladvisor</code> item_brand string required The human-readable name of the brand. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify. It should be lowercase snake_case <code>tylenol</code>, <code>zyrtec</code>, <code>listerine</code> item_id string required SKU ID of the product a customer would be calling a store about. <code>CW21001</code> item_name string required The human-readable product name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify. It should be lowercase snake_case <code>essential_foaming_cleanser</code> item_upc string contextual UPC ID of the product a customer would be calling a store about. <code>012345678905</code> link_url string required This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify. It should be lowercase snake_case <code>https://www.example.com?q=product#id</code>"},{"location":"events/where-to-buy/cta_click_wtb/","title":"CTA Click WTB","text":"<p>This event will be automatically detected and fired if the data attributes below are added to each link (<code>&lt;a&gt;</code> tag if possible, but if there is no <code>&lt;a&gt;</code> tag then add them to the <code>&lt;div&gt;</code> or other tag that represents the link).</p>"},{"location":"events/where-to-buy/cta_click_wtb/#html-data-attributes","title":"HTML Data Attributes","text":"<pre><code>&lt;div\ndata-layer-event=\"cta_click_wtb\"\ndata-layer-affiliation=\"&lt;affiliation&gt;\"\ndata-layer-category=\"&lt;category&gt;\"\ndata-layer-link_text=\"&lt;link_text&gt;\"\ndata-layer-link_url=\"&lt;link_url&gt;\"\ndata-layer-discount=\"&lt;discount&gt;\"\ndata-layer-item_id=\"&lt;item_id&gt;\"\ndata-layer-item_name=\"&lt;item_name&gt;\"\ndata-layer-price=\"&lt;price&gt;\"\n&gt;\n</code></pre>"},{"location":"events/where-to-buy/cta_click_wtb/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User clicks on a CTA link\n// NOTE: Event is automatically fired if the attributes are added to an HTML anchor element\n// or HTML element representing a link\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"cta_click_wtb\",\nevent_data: {\naffiliation: \"&lt;affiliation&gt;\", //recommeded | string | ex. Amazon.com, Walmart.com, CVS\ncategory: \"&lt;category&gt;\", // optional | string | ex. find online, find locally\ndiscount: \"&lt;discount&gt;\", // conditional | number | ex. 2.22\nitem_id: \"&lt;item_id&gt;\", // REQUIRED | string | ex. SKU_12345\nitem_name: \"&lt;item_name&gt;\", // REQUIRED | string | ex. jeggings\nlink_text: \"&lt;link_text&gt;\", // REQUIRED | string | ex. Add to Cart, Buy Now, Get Directions, store hours\nlink_url: \"&lt;link_url&gt;\", // REQUIRED | string | ex. https://www.example.com/link?test=testing\nprice: \"&lt;price&gt;\", // recommended | string | ex. 9.99\n}\n});\n</code></pre>"},{"location":"events/where-to-buy/cta_click_wtb/#variable-definitions","title":"Variable Definitions","text":"Field Type Required? Description Example affiliation string recommended A product affiliation that designates the product retailer. Amazon.com,Walmart.com,CVS category string optional Used to differentiate buy online versus buy locally. find online,find locally discount number conditional Monetary value of discount associated with a purchase. 2.22 item_id string required Item ID (context-specific). SKU_12345 item_name string required Item Name (context-specific). jeggings link_text string required The full text of the link if the link text represents an action (e.g. - Add to Cart, Buy Now, Get Directions, etc.). If the text of the link just represents information, send a description of the information (e.g. - for store hours of 8:00-16:00 send \"store hours\"). Add to Cart, Buy Now, Get Directions, store hours link_url string required The full URL of the link. https://www.example.com/link?test=testing price number recommended The monetary price of the item, in units of the specified currency parameter. 9.99"},{"location":"events/where-to-buy/get_directions_wtb/","title":"Get Directions WTB","text":"<p>Fire whenever a user successfully gets directions to local store.</p>"},{"location":"events/where-to-buy/get_directions_wtb/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User successfully gets directions to local store.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null, user_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"get_directions_wtb\",\nevent_data: {\naffiliation: \"&lt;affiliation&gt;\", // REQUIRED | string | ex. Walmart, CVS\ncomponent_type: \"&lt;component_type&gt;\", // REQUIRED | string | ex. PriceSpider, ChannelAdvisor\nitem_name: \"&lt;item_name&gt;\", // REQUIRED | string | ex. \nitem_id: \"&lt;item_id&gt;\", // REQUIRED | string | ex. CW21001\nitem_upc: \"&lt;item_upc&gt;\", // **Unknown** | string | ex. 012345678905 (12 digits)\nitem_brand: \"&lt;item_brand&gt;\", // REQUIRED | string | ex. Tylenol, Zyrtec, Listerine\nlink_url: \"&lt;link_url&gt;\", // REQUIRED | string | ex. www.amazon.com\n},\n});\n</code></pre>"},{"location":"events/where-to-buy/get_directions_wtb/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of affiliation string required This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify. It should be lowercase snake_case Walmart, CVS component_type string required The human-readable name of the WTB Provider. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify. It should be lowercase snake_case. PriceSpider, ChannelAdvisor item_brand string required The human-readable name of the brand. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify. It should be lowercase snake_case Tylenol, Zyrtec, Listerine item_id string required SKU id of product item_name string required The human-readable product name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify. It should be lowercase snake_case link_url string required This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify. It should be lowercase snake_case www.amazon.com"},{"location":"events/where-to-buy/local_tab_wtb/","title":"Switch to Local Tab","text":"<p>Fire whenever a user successfully switches to the local tab within the WTB tool.</p>"},{"location":"events/where-to-buy/local_tab_wtb/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User successfully switches to the local tab within the WTB tool.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null, user_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"local_tab_wtb\",\nevent_data: {\ncategory: \"&lt;category&gt;\", // recommended | string | ex. (unique form value, if one exists)\n},\n});\n</code></pre>"},{"location":"events/where-to-buy/local_tab_wtb/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of category string recommended This should be a unique value specific to this form, if one exists."},{"location":"events/where-to-buy/location_set_wtb/","title":"Location Set WTB","text":"<p>Fire whenever a user successfully sets their location. </p>"},{"location":"events/where-to-buy/location_set_wtb/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User successfully sets their location.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null, user_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"location_set_wtb\"\n});\n</code></pre>"},{"location":"events/where-to-buy/location_set_wtb/#variable-definitions","title":"Variable Definitions","text":"<p>This event has no parameters.</p>"},{"location":"events/where-to-buy/online_tab_wtb/","title":"Switch to Online Tab","text":"<p>Fire whenever a user successfully switches to the online tab wiithin the WTB tool.</p>"},{"location":"events/where-to-buy/online_tab_wtb/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User successfully switches to the online tab within the WTB tool.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null, user_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"online_tab_wtb\",\nevent_data: {\ncategory: \"&lt;category&gt;\"\n},\n});\n</code></pre>"},{"location":"events/where-to-buy/online_tab_wtb/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of category string recommended The form machine-readable name. This should be a unique value specific to this form, if one exists. If one does not exist, this can also be populated with the same value as the <code>&lt;name&gt;</code>. pricespider, channeladvisor"},{"location":"events/where-to-buy/sku_change/","title":"Change Item SKU","text":"<p>Fire whenever a user successfully changes the sku they are looking at within the WTB tool.</p>"},{"location":"events/where-to-buy/sku_change/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User successfully changes the sku they are looking at within the WTB tool.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null, user_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"change_item_sku_wtb\",\nevent_data: {\ncomponent_type: \"&lt;component_type&gt;\", // REQUIRED | string | ex. PriceSpider, ChannelAdvisor\nitem_brand: \"&lt;item_brand&gt;\", // REQUIRED | string | ex. Tylenol, Zyrtec, Listerine\nitem_id: \"&lt;item_id&gt;\", // REQUIRED | string | ex. CW21001\nitem_name: \"&lt;item_name&gt;\", // REQUIRED | string | ex. \nitem_upc: \"&lt;item_upc&gt;\" // **Unknown** | string | ex. 012345678905 (12 digits)\n},\n});\n</code></pre>"},{"location":"events/where-to-buy/sku_change/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of component_type string recommended The human-readable name of the WTB Provider. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify. It should be lowercase snake_case. PriceSpider, ChannelAdvisor item_brand string recommended The form machine-readable name. This should be a unique value specific to this form, if one exists. If one does not exist, this can also be populated with the same value as the . Tylenol, Zyrtec, Listerine item_id string required SKU id of product item_name string required The form human-readable product name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify the form with. It should be lowercase snake_case. item_upc string contextual UPC ID of the product a customer would be calling a store about. <code>012345678905</code>"},{"location":"events/where-to-buy/widget_closed_wtb/","title":"Close WTB Widget","text":"<p>Fire whenever a user successfully closes the WTb widget. </p>"},{"location":"events/where-to-buy/widget_closed_wtb/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User successfully closes the WTB tool.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null, user_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"widget_closed_wtb\"\n});\n</code></pre>"},{"location":"events/where-to-buy/widget_closed_wtb/#variable-definitions","title":"Variable Definitions","text":"<p>This event has no parameters.</p>"},{"location":"events/where-to-buy/widget_opened_wtb/","title":"Widget Opened WTB","text":"<p>Fire whenever a user successfully opens a WTB widget.</p>"},{"location":"events/where-to-buy/widget_opened_wtb/#javascript-code","title":"Javascript Code","text":"<pre><code>// When:\n// User successfully opens the WTB tool.\n// Code:\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({ event_data: null, user_data: null });  // Clear the previous event_data object.\ndataLayer.push({\nevent: \"widget_opened_wtb\",\nevent_data: {\ncomponent_type: \"&lt;component_type&gt;\", // REQUIRED | string | ex. PriceSpider, ChannelAdvisor\nitem_brand: \"&lt;item_brand&gt;\", // REQUIRED | string | ex. Tylenol, Zyrtec, Listerine\nitem_id: \"&lt;item_id&gt;\", // REQUIRED | string | ex. CW21001\nitem_name: \"&lt;item_name&gt;\", // REQUIRED | string | ex.\nitem_upc: \"&lt;item_upc&gt;\" // contextual | string | ex. 012345678905 (12 digits)\n}\n});\n</code></pre>"},{"location":"events/where-to-buy/widget_opened_wtb/#variable-definitions","title":"Variable Definitions","text":"Field Type Required Description Example Pattern Min Length Max Length Minimum Maximum Multiple Of component_type string required The human-readable name of the WTb tool PriceSpider, ChannelAdvisor item_brand string required The human-readable brand name. Tylenol, Zyrtec, Listerine item_id string required SKU id of product item_name string required The human-readable product name. This should be something that an analyst without a deep knowledge of the technical implementation of the site can easily identify. It should be lowercase snake_case. item_upc string contextual UPC ID of the product a customer would be calling a store about. <code>012345678905</code>"},{"location":"gcp-bq-tables/","title":"Index","text":""},{"location":"gcp-bq-tables/#google-cloud-bq-google-analytics-datasets","title":"Google Cloud - BQ Google Analytics Datasets","text":"GCP Project Number GCP Project Name Dataset ID GA4/UA Property Feed GA4/UA Property ID Data Set Type 747533556496 jjt-consumerdatalake-bigquery analytics_348451773 Kenvue|Corporate|GA4 348451773 GA4 747533556496 jjt-consumerdatalake-bigquery analytics_254081717 Consumer - Global 254081717 GA4 747533556496 jjt-consumerdatalake-bigquery 184383534 Consumer - Global UA-128610710-1 UA 747533556496 jjt-consumerdatalake-bigquery 140081701 Dr:Ci-Labo UA-1583302-1 UA 1077250011785 gtm-wnd6vzj-yme0m analytics_315851723 Consumer Heath - GA4 Test - GA4 315851723 GA4"},{"location":"gtm-scripts/kenvue-corporate-gtm-script/","title":"Kenvue DXP GLobal GTM Code","text":"<p>This document is a quick reference to implement the Global GTM Container across all Kenvue Corporate sites. For any questions regarding this content please contact Steven Rowe - srowe32@its.jnj.com</p>"},{"location":"gtm-scripts/kenvue-corporate-gtm-script/#html-code","title":"HTML Code","text":"<p>Add the following snippet to every page inside the <code>&lt;head&gt;</code> tag as possible:</p> <pre><code>&lt;!-- Google Tag Manager --&gt;\n&lt;script&gt;(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-WSPHT2V');&lt;/script&gt;\n&lt;!-- End Google Tag Manager --&gt;\n</code></pre> <p>If possible, add this snippet just inside the opening <code>&lt;body&gt;</code> tag:</p> <pre><code>&lt;!-- Google Tag Manager (noscript) --&gt;\n&lt;noscript&gt;&lt;iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-WSPHT2V\"\nheight=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"&gt;&lt;/iframe&gt;&lt;/noscript&gt;\n&lt;!-- End Google Tag Manager (noscript) --&gt;\n</code></pre> <p>Note</p> <p>The <code>noscript</code> tag is optional and primarily used for site ownership validation through Google Search Console (there are other ways of validating site ownership). If a user has JS turned off in the browser, the data layer will not work. The only GTM tags available through the iframe-loaded GTM container are custom image tags. More on the GTM noscript tag</p>"},{"location":"schemas/item/","title":"Item Object","text":"<p>An <code>item</code> is how GA4 refers to a product.  An item object should be sent whenever a product is displayed, selected, added to a cart, or purchased.</p>"},{"location":"schemas/item/#object-format","title":"Object format","text":"<pre><code>{\n// Global\n\"affiliation\": \"&lt;affiliation&gt;\",\n\"currency\": \"&lt;currency&gt;\",\n\"gtin\": \"&lt;gtin&gt;\",\n\"item_brand\": \"&lt;item_brand&gt;\",\n\"item_category\": \"&lt;item_category&gt;\",\n\"item_id\": \"&lt;item_id&gt;\",\n\"item_name\": \"&lt;item_name&gt;\",\n\"item_need_state\": \"&lt;item_need_state&gt;\",\n\"item_subcategory\": \"&lt;item_subcategory&gt;\",\n\"item_subsegment\": \"&lt;item_subsegment&gt;\",\n\"item_upc\": \"&lt;item_upc&gt;\",\n\"item_variant\": \"&lt;item_variant&gt;\",\n\"price\": \"&lt;price&gt;\",\n\"quantity\": \"&lt;quantity&gt;\",\n\"sku\": \"&lt;sku&gt;\",\n// Contextual\n\"coupon\": \"&lt;coupon&gt;\",\n\"discount\": \"&lt;discount&gt;\",\n\"creative_name\": \"&lt;creative_name&gt;\",\n\"creative_slot\": \"&lt;creative_slot&gt;\",\n\"index\": \"&lt;index&gt;\",\n\"item_list_id\": \"&lt;item_list_id&gt;\",\n\"item_list_name\": \"&lt;item_list_name&gt;\",\n\"item_out_of_stock\": \"&lt;item_out_of_stock&gt;\",\n\"item_subscription_type\": \"&lt;promotion_id&gt;\",\n\"location_id\": \"&lt;location_id&gt;\",\n\"promotion_id\": \"&lt;promotion_id&gt;\",\n\"promotion_name\": \"&lt;promotion_name&gt;\"\n}\n</code></pre>"},{"location":"schemas/item/#variable-definitions","title":"Variable definitions","text":"Name Type Required Description Example Value Maximum Length <code>affiliation</code> string required A product affiliation to designate a supplying company or brick and mortar store location. <code>Google Store</code> 100 <code>coupon</code> string contextual Coupon code used for a purchase. <code>SUMMER_FUN</code> 100 <code>creative_name</code> string required if item is being sent with a promotion event The name of a creative used in a promotional spot. <code>summer_banner2</code> 100 <code>creative_slot</code> string required if item is being sent with a promotion event The name of a creative slot. <code>featured_app_1</code> 100 <code>currency</code> string required The currency, in 3-letter ISO 4217 format. <code>USD</code> 100 <code>discount</code> number contextual Monetary value of discount associated with a purchase. <code>2.22</code> 100 <code>gtin</code> string required A Global Trade Item Number (GTIN). GTINs identify trade items, including products and services, using numeric identification codes. UPCs are a type of GTIN, so they should be added via this parameter. <code>012345678905</code> <code>index</code> number contextual The index/position of the item in a list. <code>2</code> 100 <code>item_brand</code> string required Item brand <code>Gucci</code> 100 <code>item_category</code> string required Item Category (context-specific). <code>item_category2</code> through <code>item_category5</code>can also be used if the item has many categories. <code>pants</code> 100 <code>item_id</code> string required Item ID (context-specific). <code>item_id</code> should be the item's UPC code, if available. If UPC is not available, <code>item_id</code> should be the item's SKU ID. If neither UPC nor SKU are available, the value should be an empty string. <code>UPC12345</code>, <code>SKU12345</code>, <code>\"\"</code> 100 <code>item_list_id</code> string contextual The computer-readable machine name of the list the item showed up in (if sent with a view_item_list event). Use UUID provided by the component if no more specific ID is available. <code>12345abcde12345</code> 100 <code>item_list_name</code> string contextual The human-readable name of the item list the item showed up in (if sent with a view_item_list event). If one is not available, populate with numerical index of which list this is on the page (1-indexed). For <code>filter_by_group</code> component, use that value. <code>filter_by_group</code>, <code>recommended_products</code>, <code>recently_viewed_products</code> 100 <code>item_name</code> string required Item Name (context-specific). <code>jeggings</code> 100 <code>item_need_state</code> string required Item Need State (context-specific). <code>**NEED EXAMPLES FROM STEVEN FOR DOCUMENTATION**</code> 100 <code>item_out_of_stock</code> string contextual Send as true if an item is out of stock. You should exclude this parameter if the item is in stock. <code>true</code> 100 <code>item_subcategory</code> string required Item Sub-Category (context-specific). <code>facial moisturizers &amp; serums</code>, <code>best sellers</code>, <code>new</code> 100 <code>item_subsegment</code> string required Item Sub-Segment (context-specific). <code>**NEED EXAMPLES FROM STEVEN FOR DOCUMENTATION**</code> 100 <code>item_subscription_type</code> string contextual Item Subscription Type. The subscription type when a user chooses to subscribe to a product being sent multiple times after their purchase. <code>3-months</code>, <code>6-months</code>, <code>9-months</code> 100 <code>item_upc</code> string contextual UPC ID of the product a customer would be calling a store about. <code>012345678905</code> 100 <code>item_variant</code> string required The variant of the item. <code>Black</code> 100 <code>location_id</code> string required if the item is associated with a physical location The location associated with the event. If possible, set to the Google Place ID that corresponds to the associated item. Can also be overridden to a custom location ID string. <code>L_12345</code> 100 <code>price</code> number required The monetary price of the item, in units of the specified currency parameter. <code>9.99</code> 100 <code>promotion_id</code> string required if item is being sent with a promotion event The ID of a product promotion. <code>P_12345</code> 100 <code>promotion_name</code> string required if item is being sent with a promotion event The name of a product promotion. One of <code>promotion_id</code> or <code>promotion name</code> is required. <code>Summer Sale</code> 100 <code>quantity</code> integer required Item quantity. <code>1</code> 100 <code>sku</code> string contextual The item's stock-keeping unit (SKU) ID, when available. <code>SKU12345</code> 100"}]}